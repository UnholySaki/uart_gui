ARM GAS  C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s 			page 1


   1              		.cpu cortex-m3
   2              		.arch armv7-m
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"hal_i2c.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.file 1 "Core/Src/hal_i2c.c"
  18              		.section	.text.hal_i2c_handle_idx,"ax",%progbits
  19              		.align	1
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  24              	hal_i2c_handle_idx:
  25              	.LVL0:
  26              	.LFB73:
   1:Core/Src/hal_i2c.c **** /**
   2:Core/Src/hal_i2c.c ****  ******************************************************************************
   3:Core/Src/hal_i2c.c ****  * @file    hal_i2c.c
   4:Core/Src/hal_i2c.c ****  * @author  VCD
   5:Core/Src/hal_i2c.c ****  * @brief   header file for hal i2c master mode
   6:Core/Src/hal_i2c.c ****  * @date    Jan 19 2024
   7:Core/Src/hal_i2c.c ****  ******************************************************************************
   8:Core/Src/hal_i2c.c ****  * @attention
   9:Core/Src/hal_i2c.c ****  *
  10:Core/Src/hal_i2c.c ****  * Copyright (c) 2024 Austin Circuit Design.
  11:Core/Src/hal_i2c.c ****  * All rights reserved.
  12:Core/Src/hal_i2c.c ****  ******************************************************************************
  13:Core/Src/hal_i2c.c ****  */
  14:Core/Src/hal_i2c.c **** 
  15:Core/Src/hal_i2c.c **** /* Includes ------------------------------------------------------------------*/
  16:Core/Src/hal_i2c.c **** #include "hal_i2c.h"
  17:Core/Src/hal_i2c.c **** #include "main.h"
  18:Core/Src/hal_i2c.c **** #include "hal_gpio.h"
  19:Core/Src/hal_i2c.c **** #include "board_config.h"
  20:Core/Src/hal_i2c.c **** #include "memory_map.h"
  21:Core/Src/hal_i2c.c **** #include "string.h"
  22:Core/Src/hal_i2c.c **** /* MACRO   define ------------------------------------------------------------*/
  23:Core/Src/hal_i2c.c **** #define I2C_WAIT_TIMEOUT 2000
  24:Core/Src/hal_i2c.c **** 
  25:Core/Src/hal_i2c.c **** /* Module variable define ------------------------------------------------------------*/
  26:Core/Src/hal_i2c.c **** I2C_HandleTypeDef handle_i2c[HAL_I2C_NUM];
  27:Core/Src/hal_i2c.c **** 
  28:Core/Src/hal_i2c.c **** static uint8_t slave_addr[HAL_I2C_NUM];
  29:Core/Src/hal_i2c.c **** const I2C_TypeDef *i2c_module[HAL_I2C_NUM] = {I2CI0_MODULE, I2CI1_MODULE};
  30:Core/Src/hal_i2c.c **** const uint32_t i2c_timing[HAL_I2C_NUM] = {100000, 400000};
  31:Core/Src/hal_i2c.c **** const hal_gpio_t sda_pin[HAL_I2C_NUM] = {
  32:Core/Src/hal_i2c.c ****     {.pin = I2CI0_SDA_GPIO_PIN, .port = I2CI0_SDA_GPIO_PORT},
ARM GAS  C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s 			page 2


  33:Core/Src/hal_i2c.c ****     {.pin = I2CI0_SDA_GPIO_PIN, .port = I2CI0_SDA_GPIO_PORT},
  34:Core/Src/hal_i2c.c **** };
  35:Core/Src/hal_i2c.c **** const hal_gpio_t scl_pin[HAL_I2C_NUM] = {
  36:Core/Src/hal_i2c.c ****     {.pin = I2CI0_SCL_GPIO_PIN, .port = I2CI0_SCL_GPIO_PORT},
  37:Core/Src/hal_i2c.c ****     {.pin = I2CI0_SCL_GPIO_PIN, .port = I2CI0_SCL_GPIO_PORT},
  38:Core/Src/hal_i2c.c **** };
  39:Core/Src/hal_i2c.c **** const uint16_t sda_pin_func[HAL_I2C_NUM] = {I2CI0_SDA_GPIO_FUNC, I2CI0_SDA_GPIO_FUNC};
  40:Core/Src/hal_i2c.c **** const uint16_t scl_pin_func[HAL_I2C_NUM] = {I2CI0_SCL_GPIO_FUNC, I2CI0_SCL_GPIO_FUNC};
  41:Core/Src/hal_i2c.c **** 
  42:Core/Src/hal_i2c.c **** /* Function prototype ------------------------------------------------------------*/
  43:Core/Src/hal_i2c.c **** static void hal_i2c_semaphore_give(hal_i2c_instance_e hali2c);
  44:Core/Src/hal_i2c.c **** static bool hal_i2c_semaphore_wait(hal_i2c_instance_e hali2c, uint32_t timeout);
  45:Core/Src/hal_i2c.c **** static int32_t hal_i2c_handle_idx(hal_i2c_hdl_t *handle);
  46:Core/Src/hal_i2c.c **** 
  47:Core/Src/hal_i2c.c **** /* Functions          ------------------------------------------------------------*/
  48:Core/Src/hal_i2c.c **** /**
  49:Core/Src/hal_i2c.c ****  * @brief  Initialize hal i2c module
  50:Core/Src/hal_i2c.c ****  * @param  None: pointer to daq instance object
  51:Core/Src/hal_i2c.c ****  * @retval HAL_I2C_SUCCESS
  52:Core/Src/hal_i2c.c ****  */
  53:Core/Src/hal_i2c.c **** hal_i2c_stt_e hal_i2c_init(void)
  54:Core/Src/hal_i2c.c **** {
  55:Core/Src/hal_i2c.c ****   hal_i2c_stt_e stt = HAL_I2C_SUCCESS;
  56:Core/Src/hal_i2c.c **** #if I2C_USE_DMA
  57:Core/Src/hal_i2c.c ****   memset(handle_i2c, 0, sizeof(handle_i2c));
  58:Core/Src/hal_i2c.c ****   memset(hdma_i2c_rx, 0, sizeof(hdma_i2c_rx));
  59:Core/Src/hal_i2c.c ****   memset(hdma_i2c_tx, 0, sizeof(hdma_i2c_tx));
  60:Core/Src/hal_i2c.c **** #endif
  61:Core/Src/hal_i2c.c ****   return stt;
  62:Core/Src/hal_i2c.c **** }
  63:Core/Src/hal_i2c.c **** 
  64:Core/Src/hal_i2c.c **** /**
  65:Core/Src/hal_i2c.c ****  * @brief  Open an i2c port instance
  66:Core/Src/hal_i2c.c ****  * @param  idx: i2c module instance
  67:Core/Src/hal_i2c.c ****  * @param  cfg: i2c module cofiguration
  68:Core/Src/hal_i2c.c ****  * @retval pointer to i2c handle
  69:Core/Src/hal_i2c.c ****  */
  70:Core/Src/hal_i2c.c **** hal_i2c_hdl_t *hal_i2c_open(hal_i2c_instance_e idx, hal_i2c_cfg_t cfg)
  71:Core/Src/hal_i2c.c **** {
  72:Core/Src/hal_i2c.c ****   hal_i2c_hdl_t *handle = NULL;
  73:Core/Src/hal_i2c.c **** 
  74:Core/Src/hal_i2c.c ****   /*##-1- Configure the I2C peripheral ######################################*/
  75:Core/Src/hal_i2c.c ****   handle_i2c[idx].Instance = (I2C_TypeDef *)i2c_module[idx];
  76:Core/Src/hal_i2c.c ****   handle_i2c[idx].Init.ClockSpeed = i2c_timing[cfg.speed];
  77:Core/Src/hal_i2c.c ****   handle_i2c[idx].Init.DutyCycle = I2C_DUTYCYCLE_2;
  78:Core/Src/hal_i2c.c ****   handle_i2c[idx].Init.AddressingMode = I2C_ADDRESSINGMODE_7BIT;
  79:Core/Src/hal_i2c.c ****   handle_i2c[idx].Init.DualAddressMode = I2C_DUALADDRESS_DISABLE;
  80:Core/Src/hal_i2c.c ****   handle_i2c[idx].Init.GeneralCallMode = I2C_GENERALCALL_DISABLE;
  81:Core/Src/hal_i2c.c ****   handle_i2c[idx].Init.NoStretchMode = I2C_NOSTRETCH_ENABLED;
  82:Core/Src/hal_i2c.c ****   handle_i2c[idx].Init.OwnAddress1 = 16;
  83:Core/Src/hal_i2c.c ****   handle_i2c[idx].Init.OwnAddress2 = 0;
  84:Core/Src/hal_i2c.c **** 
  85:Core/Src/hal_i2c.c ****   if (HAL_I2C_Init(&handle_i2c[idx]) != HAL_OK)
  86:Core/Src/hal_i2c.c ****   {
  87:Core/Src/hal_i2c.c ****     /* Initialization Error */
  88:Core/Src/hal_i2c.c ****     return handle;
  89:Core/Src/hal_i2c.c ****   }
ARM GAS  C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s 			page 3


  90:Core/Src/hal_i2c.c ****   slave_addr[idx] = cfg.slave_addr;
  91:Core/Src/hal_i2c.c ****   handle = &handle_i2c[idx];
  92:Core/Src/hal_i2c.c **** 
  93:Core/Src/hal_i2c.c ****   return handle;
  94:Core/Src/hal_i2c.c **** }
  95:Core/Src/hal_i2c.c **** 
  96:Core/Src/hal_i2c.c **** /**
  97:Core/Src/hal_i2c.c ****  * @brief  Set slave address when the slave address needs to be changed
  98:Core/Src/hal_i2c.c ****  * @param  handle: pointer to i2c handle return by open function
  99:Core/Src/hal_i2c.c ****  * @param  addr: New slave address
 100:Core/Src/hal_i2c.c ****  * @retval status  HAL_I2C_FAILED, HAL_I2C_SUCCESS
 101:Core/Src/hal_i2c.c ****  */
 102:Core/Src/hal_i2c.c **** hal_i2c_stt_e hal_i2c_set_slave_addr(hal_i2c_hdl_t *handle, uint8_t addr)
 103:Core/Src/hal_i2c.c **** {
 104:Core/Src/hal_i2c.c ****   hal_i2c_stt_e stt = HAL_I2C_FAILED;
 105:Core/Src/hal_i2c.c ****   int32_t idx = hal_i2c_handle_idx(handle);
 106:Core/Src/hal_i2c.c ****   if (idx >= 0)
 107:Core/Src/hal_i2c.c ****   {
 108:Core/Src/hal_i2c.c ****     slave_addr[idx] = addr;
 109:Core/Src/hal_i2c.c ****     stt = HAL_I2C_SUCCESS;
 110:Core/Src/hal_i2c.c ****   }
 111:Core/Src/hal_i2c.c ****   return stt;
 112:Core/Src/hal_i2c.c **** }
 113:Core/Src/hal_i2c.c **** 
 114:Core/Src/hal_i2c.c **** /**
 115:Core/Src/hal_i2c.c ****  * @brief  Read data from i2c port
 116:Core/Src/hal_i2c.c ****  * @param  handle: pointer to i2c handle return by open function
 117:Core/Src/hal_i2c.c ****  * @param  subaddr: Device register address
 118:Core/Src/hal_i2c.c ****  * @param  len_addr: Length of device address to send
 119:Core/Src/hal_i2c.c ****  * @param  buf: Pointer to input buffer
 120:Core/Src/hal_i2c.c ****  * @param  len: Number of byte to read from port
 121:Core/Src/hal_i2c.c ****  * @retval status  HAL_I2C_FAILED, HAL_I2C_SUCCESS
 122:Core/Src/hal_i2c.c ****  */
 123:Core/Src/hal_i2c.c **** hal_i2c_stt_e hal_i2c_read(hal_i2c_hdl_t *handle, uint16_t subaddr, uint16_t len_addr, uint8_t *buf
 124:Core/Src/hal_i2c.c **** {
 125:Core/Src/hal_i2c.c ****   hal_i2c_stt_e stt = HAL_I2C_FAILED;
 126:Core/Src/hal_i2c.c ****   HAL_StatusTypeDef hwstt;
 127:Core/Src/hal_i2c.c ****   int32_t idx = hal_i2c_handle_idx(handle);
 128:Core/Src/hal_i2c.c ****   if (len_addr == 0)
 129:Core/Src/hal_i2c.c ****   {
 130:Core/Src/hal_i2c.c **** #if I2C_USE_DMA
 131:Core/Src/hal_i2c.c ****     hwstt = HAL_I2C_Master_Receive_DMA((I2C_HandleTypeDef *)handle, (uint16_t)slave_addr[idx], (uin
 132:Core/Src/hal_i2c.c **** #else
 133:Core/Src/hal_i2c.c ****     hwstt = HAL_I2C_Master_Receive_IT((I2C_HandleTypeDef *)handle, (uint16_t)slave_addr[idx], (uint
 134:Core/Src/hal_i2c.c **** #endif
 135:Core/Src/hal_i2c.c ****   }
 136:Core/Src/hal_i2c.c ****   else
 137:Core/Src/hal_i2c.c ****   {
 138:Core/Src/hal_i2c.c **** #if I2C_USE_DMA
 139:Core/Src/hal_i2c.c ****     hwstt = HAL_I2C_Mem_Read_DMA((I2C_HandleTypeDef *)handle, (uint16_t)slave_addr[idx], subaddr,
 140:Core/Src/hal_i2c.c ****                                  len_addr, buf, len);
 141:Core/Src/hal_i2c.c **** #else
 142:Core/Src/hal_i2c.c ****     hwstt = HAL_I2C_Mem_Read_IT((I2C_HandleTypeDef *)handle, (uint16_t)slave_addr[idx], subaddr,
 143:Core/Src/hal_i2c.c ****                                 len_addr, buf, len);
 144:Core/Src/hal_i2c.c **** #endif
 145:Core/Src/hal_i2c.c ****   }
 146:Core/Src/hal_i2c.c ****   if (hwstt == HAL_OK)
ARM GAS  C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s 			page 4


 147:Core/Src/hal_i2c.c ****   {
 148:Core/Src/hal_i2c.c **** 
 149:Core/Src/hal_i2c.c ****     stt = HAL_I2C_SUCCESS;
 150:Core/Src/hal_i2c.c ****   }
 151:Core/Src/hal_i2c.c ****   return stt;
 152:Core/Src/hal_i2c.c **** }
 153:Core/Src/hal_i2c.c **** /**
 154:Core/Src/hal_i2c.c ****  * @brief  write data too i2c port
 155:Core/Src/hal_i2c.c ****  * @param  handle: pointer to i2c handle return by open function
 156:Core/Src/hal_i2c.c ****  * @param  subaddr: Device register address
 157:Core/Src/hal_i2c.c ****  * @param  len_addr: Length of device address to send
 158:Core/Src/hal_i2c.c ****  * @param  buf: Pointer to out buffer
 159:Core/Src/hal_i2c.c ****  * @param  len: Number of byte to write to port
 160:Core/Src/hal_i2c.c ****  * @retval status  HAL_I2C_FAILED, HAL_I2C_SUCCESS
 161:Core/Src/hal_i2c.c ****  */
 162:Core/Src/hal_i2c.c **** hal_i2c_stt_e hal_i2c_write(hal_i2c_hdl_t *handle, uint16_t subaddr, uint16_t len_addr, uint8_t *bu
 163:Core/Src/hal_i2c.c **** {
 164:Core/Src/hal_i2c.c ****   hal_i2c_stt_e stt = HAL_I2C_FAILED;
 165:Core/Src/hal_i2c.c ****   HAL_StatusTypeDef hwstt;
 166:Core/Src/hal_i2c.c ****   int32_t idx = hal_i2c_handle_idx(handle);
 167:Core/Src/hal_i2c.c ****   if (len_addr == 0)
 168:Core/Src/hal_i2c.c ****   {
 169:Core/Src/hal_i2c.c **** #if I2C_USE_DMA
 170:Core/Src/hal_i2c.c ****     hwstt = HAL_I2C_Master_Transmit_DMA((I2C_HandleTypeDef *)handle, (uint16_t)slave_addr[idx], (ui
 171:Core/Src/hal_i2c.c **** #else
 172:Core/Src/hal_i2c.c ****     hwstt = HAL_I2C_Master_Transmit_IT((I2C_HandleTypeDef *)handle, (uint16_t)slave_addr[idx], (uin
 173:Core/Src/hal_i2c.c **** #endif
 174:Core/Src/hal_i2c.c ****   }
 175:Core/Src/hal_i2c.c ****   else
 176:Core/Src/hal_i2c.c ****   {
 177:Core/Src/hal_i2c.c **** #if I2C_USE_DMA
 178:Core/Src/hal_i2c.c ****     hwstt = HAL_I2C_Mem_Write_DMA((I2C_HandleTypeDef *)handle, (uint16_t)slave_addr[idx], subaddr,
 179:Core/Src/hal_i2c.c ****                                   len_addr, buf, len);
 180:Core/Src/hal_i2c.c **** #else
 181:Core/Src/hal_i2c.c ****     hwstt = HAL_I2C_Mem_Write_IT((I2C_HandleTypeDef *)handle, (uint16_t)slave_addr[idx], subaddr,
 182:Core/Src/hal_i2c.c ****                                  len_addr, buf, len);
 183:Core/Src/hal_i2c.c **** #endif
 184:Core/Src/hal_i2c.c ****   }
 185:Core/Src/hal_i2c.c ****   if (hwstt == HAL_OK)
 186:Core/Src/hal_i2c.c ****   {
 187:Core/Src/hal_i2c.c ****     stt = HAL_I2C_SUCCESS;
 188:Core/Src/hal_i2c.c ****   }
 189:Core/Src/hal_i2c.c ****   return stt;
 190:Core/Src/hal_i2c.c **** }
 191:Core/Src/hal_i2c.c **** /**
 192:Core/Src/hal_i2c.c ****  * @brief  Cancel a transfer
 193:Core/Src/hal_i2c.c ****  * @param  handle: pointer to i2c handle return by open function
 194:Core/Src/hal_i2c.c ****  * @Note   Not support currently
 195:Core/Src/hal_i2c.c ****  * @retval status  HAL_I2C_FAILED, HAL_I2C_SUCCESS
 196:Core/Src/hal_i2c.c ****  */
 197:Core/Src/hal_i2c.c **** hal_i2c_stt_e hal_i2c_cancel(hal_i2c_hdl_t *handle)
 198:Core/Src/hal_i2c.c **** {
 199:Core/Src/hal_i2c.c ****   hal_i2c_stt_e stt = HAL_I2C_FAILED;
 200:Core/Src/hal_i2c.c ****   return stt;
 201:Core/Src/hal_i2c.c **** }
 202:Core/Src/hal_i2c.c **** /**
 203:Core/Src/hal_i2c.c ****  * @brief  Close an i2c port, to let other thread can use
ARM GAS  C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s 			page 5


 204:Core/Src/hal_i2c.c ****  * @param  handle: pointer to a pointer of i2c handle return by open function
 205:Core/Src/hal_i2c.c ****  * @retval status  HAL_I2C_FAILED, HAL_I2C_SUCCESS
 206:Core/Src/hal_i2c.c ****  */
 207:Core/Src/hal_i2c.c **** hal_i2c_stt_e hal_i2c_close(hal_i2c_hdl_t **handle)
 208:Core/Src/hal_i2c.c **** {
 209:Core/Src/hal_i2c.c ****   hal_i2c_stt_e stt = HAL_I2C_SUCCESS;
 210:Core/Src/hal_i2c.c ****   int32_t idx = hal_i2c_handle_idx(*handle);
 211:Core/Src/hal_i2c.c ****   hal_i2c_MspDeInit(*handle);
 212:Core/Src/hal_i2c.c ****   *handle = NULL;
 213:Core/Src/hal_i2c.c ****   return stt;
 214:Core/Src/hal_i2c.c **** }
 215:Core/Src/hal_i2c.c **** 
 216:Core/Src/hal_i2c.c **** /**
 217:Core/Src/hal_i2c.c ****  * @brief  Wait spi to complete transfer
 218:Core/Src/hal_i2c.c ****  * @param  hali2c: poiter to i2c handle
 219:Core/Src/hal_i2c.c ****  * @param  timeout: timeout
 220:Core/Src/hal_i2c.c ****  * @retval HAL_SPI_SUCCESS
 221:Core/Src/hal_i2c.c ****  */
 222:Core/Src/hal_i2c.c **** static bool hal_i2c_semaphore_wait(hal_i2c_instance_e hali2c, uint32_t timeout)
 223:Core/Src/hal_i2c.c **** {
 224:Core/Src/hal_i2c.c **** }
 225:Core/Src/hal_i2c.c **** /* Private function  -----------------------------------------------*/
 226:Core/Src/hal_i2c.c **** /**
 227:Core/Src/hal_i2c.c ****  * @brief  Get handle index
 228:Core/Src/hal_i2c.c ****  * @param  handle: poiter to spi handle
 229:Core/Src/hal_i2c.c ****  * @retval I2C module index
 230:Core/Src/hal_i2c.c ****  */
 231:Core/Src/hal_i2c.c **** static int32_t hal_i2c_handle_idx(hal_i2c_hdl_t *handle)
 232:Core/Src/hal_i2c.c **** {
  27              		.loc 1 232 1 view -0
  28              		.cfi_startproc
  29              		@ args = 0, pretend = 0, frame = 0
  30              		@ frame_needed = 0, uses_anonymous_args = 0
  31              		@ link register save eliminated.
  32              		.loc 1 232 1 is_stmt 0 view .LVU1
  33 0000 0246     		mov	r2, r0
 233:Core/Src/hal_i2c.c ****   int32_t idx = -1;
  34              		.loc 1 233 3 is_stmt 1 view .LVU2
  35              	.LVL1:
 234:Core/Src/hal_i2c.c ****   for (int i = 0; i < HAL_I2C_NUM; i++)
  36              		.loc 1 234 3 view .LVU3
  37              	.LBB2:
  38              		.loc 1 234 8 view .LVU4
  39              		.loc 1 234 12 is_stmt 0 view .LVU5
  40 0002 0020     		movs	r0, #0
  41              	.LVL2:
  42              	.L2:
  43              		.loc 1 234 21 is_stmt 1 discriminator 1 view .LVU6
  44 0004 0128     		cmp	r0, #1
  45 0006 07DC     		bgt	.L5
 235:Core/Src/hal_i2c.c ****   {
 236:Core/Src/hal_i2c.c ****     if ((uint32_t)handle == (uint32_t)&handle_i2c[i])
  46              		.loc 1 236 5 view .LVU7
  47              		.loc 1 236 39 is_stmt 0 view .LVU8
  48 0008 5421     		movs	r1, #84
  49 000a 054B     		ldr	r3, .L6
  50 000c 01FB0033 		mla	r3, r1, r0, r3
ARM GAS  C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s 			page 6


  51              		.loc 1 236 8 view .LVU9
  52 0010 9342     		cmp	r3, r2
  53 0012 03D0     		beq	.L1
 234:Core/Src/hal_i2c.c ****   for (int i = 0; i < HAL_I2C_NUM; i++)
  54              		.loc 1 234 37 is_stmt 1 discriminator 2 view .LVU10
  55 0014 0130     		adds	r0, r0, #1
  56              	.LVL3:
 234:Core/Src/hal_i2c.c ****   for (int i = 0; i < HAL_I2C_NUM; i++)
  57              		.loc 1 234 37 is_stmt 0 discriminator 2 view .LVU11
  58 0016 F5E7     		b	.L2
  59              	.L5:
 234:Core/Src/hal_i2c.c ****   for (int i = 0; i < HAL_I2C_NUM; i++)
  60              		.loc 1 234 37 discriminator 2 view .LVU12
  61              	.LBE2:
 233:Core/Src/hal_i2c.c ****   for (int i = 0; i < HAL_I2C_NUM; i++)
  62              		.loc 1 233 11 view .LVU13
  63 0018 4FF0FF30 		mov	r0, #-1
  64              	.LVL4:
 237:Core/Src/hal_i2c.c ****     {
 238:Core/Src/hal_i2c.c ****       idx = i;
 239:Core/Src/hal_i2c.c ****       break;
 240:Core/Src/hal_i2c.c ****     }
 241:Core/Src/hal_i2c.c ****   }
 242:Core/Src/hal_i2c.c ****   return idx;
  65              		.loc 1 242 3 is_stmt 1 view .LVU14
  66              	.L1:
 243:Core/Src/hal_i2c.c **** }
  67              		.loc 1 243 1 is_stmt 0 view .LVU15
  68 001c 7047     		bx	lr
  69              	.L7:
  70 001e 00BF     		.align	2
  71              	.L6:
  72 0020 00000000 		.word	handle_i2c
  73              		.cfi_endproc
  74              	.LFE73:
  76              		.section	.text.hal_i2c_init,"ax",%progbits
  77              		.align	1
  78              		.global	hal_i2c_init
  79              		.syntax unified
  80              		.thumb
  81              		.thumb_func
  83              	hal_i2c_init:
  84              	.LFB65:
  54:Core/Src/hal_i2c.c ****   hal_i2c_stt_e stt = HAL_I2C_SUCCESS;
  85              		.loc 1 54 1 is_stmt 1 view -0
  86              		.cfi_startproc
  87              		@ args = 0, pretend = 0, frame = 0
  88              		@ frame_needed = 0, uses_anonymous_args = 0
  89              		@ link register save eliminated.
  55:Core/Src/hal_i2c.c **** #if I2C_USE_DMA
  90              		.loc 1 55 3 view .LVU17
  91              	.LVL5:
  61:Core/Src/hal_i2c.c **** }
  92              		.loc 1 61 3 view .LVU18
  62:Core/Src/hal_i2c.c **** 
  93              		.loc 1 62 1 is_stmt 0 view .LVU19
  94 0000 0020     		movs	r0, #0
ARM GAS  C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s 			page 7


  95 0002 7047     		bx	lr
  96              		.cfi_endproc
  97              	.LFE65:
  99              		.section	.text.hal_i2c_open,"ax",%progbits
 100              		.align	1
 101              		.global	hal_i2c_open
 102              		.syntax unified
 103              		.thumb
 104              		.thumb_func
 106              	hal_i2c_open:
 107              	.LVL6:
 108              	.LFB66:
  71:Core/Src/hal_i2c.c ****   hal_i2c_hdl_t *handle = NULL;
 109              		.loc 1 71 1 is_stmt 1 view -0
 110              		.cfi_startproc
 111              		@ args = 0, pretend = 0, frame = 8
 112              		@ frame_needed = 0, uses_anonymous_args = 0
  71:Core/Src/hal_i2c.c ****   hal_i2c_hdl_t *handle = NULL;
 113              		.loc 1 71 1 is_stmt 0 view .LVU21
 114 0000 30B5     		push	{r4, r5, lr}
 115              	.LCFI0:
 116              		.cfi_def_cfa_offset 12
 117              		.cfi_offset 4, -12
 118              		.cfi_offset 5, -8
 119              		.cfi_offset 14, -4
 120 0002 83B0     		sub	sp, sp, #12
 121              	.LCFI1:
 122              		.cfi_def_cfa_offset 24
 123 0004 0446     		mov	r4, r0
 124 0006 ADF80410 		strh	r1, [sp, #4]	@ movhi
  72:Core/Src/hal_i2c.c **** 
 125              		.loc 1 72 3 is_stmt 1 view .LVU22
 126              	.LVL7:
  75:Core/Src/hal_i2c.c ****   handle_i2c[idx].Init.ClockSpeed = i2c_timing[cfg.speed];
 127              		.loc 1 75 3 view .LVU23
  75:Core/Src/hal_i2c.c ****   handle_i2c[idx].Init.ClockSpeed = i2c_timing[cfg.speed];
 128              		.loc 1 75 55 is_stmt 0 view .LVU24
 129 000a 144B     		ldr	r3, .L13
 130 000c 53F82010 		ldr	r1, [r3, r0, lsl #2]
  75:Core/Src/hal_i2c.c ****   handle_i2c[idx].Init.ClockSpeed = i2c_timing[cfg.speed];
 131              		.loc 1 75 28 view .LVU25
 132 0010 134A     		ldr	r2, .L13+4
 133 0012 5423     		movs	r3, #84
 134 0014 00FB03F3 		mul	r3, r0, r3
 135 0018 D018     		adds	r0, r2, r3
 136              	.LVL8:
  75:Core/Src/hal_i2c.c ****   handle_i2c[idx].Init.ClockSpeed = i2c_timing[cfg.speed];
 137              		.loc 1 75 28 view .LVU26
 138 001a D150     		str	r1, [r2, r3]
  76:Core/Src/hal_i2c.c ****   handle_i2c[idx].Init.DutyCycle = I2C_DUTYCYCLE_2;
 139              		.loc 1 76 3 is_stmt 1 view .LVU27
  76:Core/Src/hal_i2c.c ****   handle_i2c[idx].Init.DutyCycle = I2C_DUTYCYCLE_2;
 140              		.loc 1 76 51 is_stmt 0 view .LVU28
 141 001c 9DF80520 		ldrb	r2, [sp, #5]	@ zero_extendqisi2
  76:Core/Src/hal_i2c.c ****   handle_i2c[idx].Init.DutyCycle = I2C_DUTYCYCLE_2;
 142              		.loc 1 76 47 view .LVU29
 143 0020 104B     		ldr	r3, .L13+8
ARM GAS  C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s 			page 8


 144 0022 53F82230 		ldr	r3, [r3, r2, lsl #2]
  76:Core/Src/hal_i2c.c ****   handle_i2c[idx].Init.DutyCycle = I2C_DUTYCYCLE_2;
 145              		.loc 1 76 35 view .LVU30
 146 0026 4360     		str	r3, [r0, #4]
  77:Core/Src/hal_i2c.c ****   handle_i2c[idx].Init.AddressingMode = I2C_ADDRESSINGMODE_7BIT;
 147              		.loc 1 77 3 is_stmt 1 view .LVU31
  77:Core/Src/hal_i2c.c ****   handle_i2c[idx].Init.AddressingMode = I2C_ADDRESSINGMODE_7BIT;
 148              		.loc 1 77 34 is_stmt 0 view .LVU32
 149 0028 0023     		movs	r3, #0
 150 002a 8360     		str	r3, [r0, #8]
  78:Core/Src/hal_i2c.c ****   handle_i2c[idx].Init.DualAddressMode = I2C_DUALADDRESS_DISABLE;
 151              		.loc 1 78 3 is_stmt 1 view .LVU33
  78:Core/Src/hal_i2c.c ****   handle_i2c[idx].Init.DualAddressMode = I2C_DUALADDRESS_DISABLE;
 152              		.loc 1 78 39 is_stmt 0 view .LVU34
 153 002c 4FF48042 		mov	r2, #16384
 154 0030 0261     		str	r2, [r0, #16]
  79:Core/Src/hal_i2c.c ****   handle_i2c[idx].Init.GeneralCallMode = I2C_GENERALCALL_DISABLE;
 155              		.loc 1 79 3 is_stmt 1 view .LVU35
  79:Core/Src/hal_i2c.c ****   handle_i2c[idx].Init.GeneralCallMode = I2C_GENERALCALL_DISABLE;
 156              		.loc 1 79 40 is_stmt 0 view .LVU36
 157 0032 4361     		str	r3, [r0, #20]
  80:Core/Src/hal_i2c.c ****   handle_i2c[idx].Init.NoStretchMode = I2C_NOSTRETCH_ENABLED;
 158              		.loc 1 80 3 is_stmt 1 view .LVU37
  80:Core/Src/hal_i2c.c ****   handle_i2c[idx].Init.NoStretchMode = I2C_NOSTRETCH_ENABLED;
 159              		.loc 1 80 40 is_stmt 0 view .LVU38
 160 0034 C361     		str	r3, [r0, #28]
  81:Core/Src/hal_i2c.c ****   handle_i2c[idx].Init.OwnAddress1 = 16;
 161              		.loc 1 81 3 is_stmt 1 view .LVU39
  81:Core/Src/hal_i2c.c ****   handle_i2c[idx].Init.OwnAddress1 = 16;
 162              		.loc 1 81 38 is_stmt 0 view .LVU40
 163 0036 8022     		movs	r2, #128
 164 0038 0262     		str	r2, [r0, #32]
  82:Core/Src/hal_i2c.c ****   handle_i2c[idx].Init.OwnAddress2 = 0;
 165              		.loc 1 82 3 is_stmt 1 view .LVU41
  82:Core/Src/hal_i2c.c ****   handle_i2c[idx].Init.OwnAddress2 = 0;
 166              		.loc 1 82 36 is_stmt 0 view .LVU42
 167 003a 1022     		movs	r2, #16
 168 003c C260     		str	r2, [r0, #12]
  83:Core/Src/hal_i2c.c **** 
 169              		.loc 1 83 3 is_stmt 1 view .LVU43
  83:Core/Src/hal_i2c.c **** 
 170              		.loc 1 83 36 is_stmt 0 view .LVU44
 171 003e 8361     		str	r3, [r0, #24]
  85:Core/Src/hal_i2c.c ****   {
 172              		.loc 1 85 3 is_stmt 1 view .LVU45
  85:Core/Src/hal_i2c.c ****   {
 173              		.loc 1 85 7 is_stmt 0 view .LVU46
 174 0040 0546     		mov	r5, r0
 175 0042 FFF7FEFF 		bl	HAL_I2C_Init
 176              	.LVL9:
  85:Core/Src/hal_i2c.c ****   {
 177              		.loc 1 85 6 discriminator 1 view .LVU47
 178 0046 30B9     		cbnz	r0, .L11
  90:Core/Src/hal_i2c.c ****   handle = &handle_i2c[idx];
 179              		.loc 1 90 3 is_stmt 1 view .LVU48
  90:Core/Src/hal_i2c.c ****   handle = &handle_i2c[idx];
 180              		.loc 1 90 24 is_stmt 0 view .LVU49
ARM GAS  C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s 			page 9


 181 0048 9DF80420 		ldrb	r2, [sp, #4]	@ zero_extendqisi2
  90:Core/Src/hal_i2c.c ****   handle = &handle_i2c[idx];
 182              		.loc 1 90 19 view .LVU50
 183 004c 064B     		ldr	r3, .L13+12
 184 004e 1A55     		strb	r2, [r3, r4]
  91:Core/Src/hal_i2c.c **** 
 185              		.loc 1 91 3 is_stmt 1 view .LVU51
 186              	.LVL10:
  93:Core/Src/hal_i2c.c **** }
 187              		.loc 1 93 3 view .LVU52
 188              	.L9:
  94:Core/Src/hal_i2c.c **** 
 189              		.loc 1 94 1 is_stmt 0 view .LVU53
 190 0050 2846     		mov	r0, r5
 191 0052 03B0     		add	sp, sp, #12
 192              	.LCFI2:
 193              		.cfi_remember_state
 194              		.cfi_def_cfa_offset 12
 195              		@ sp needed
 196 0054 30BD     		pop	{r4, r5, pc}
 197              	.LVL11:
 198              	.L11:
 199              	.LCFI3:
 200              		.cfi_restore_state
  88:Core/Src/hal_i2c.c ****   }
 201              		.loc 1 88 12 view .LVU54
 202 0056 0025     		movs	r5, #0
 203 0058 FAE7     		b	.L9
 204              	.L14:
 205 005a 00BF     		.align	2
 206              	.L13:
 207 005c 00000000 		.word	i2c_module
 208 0060 00000000 		.word	handle_i2c
 209 0064 00000000 		.word	i2c_timing
 210 0068 00000000 		.word	slave_addr
 211              		.cfi_endproc
 212              	.LFE66:
 214              		.section	.text.hal_i2c_set_slave_addr,"ax",%progbits
 215              		.align	1
 216              		.global	hal_i2c_set_slave_addr
 217              		.syntax unified
 218              		.thumb
 219              		.thumb_func
 221              	hal_i2c_set_slave_addr:
 222              	.LVL12:
 223              	.LFB67:
 103:Core/Src/hal_i2c.c ****   hal_i2c_stt_e stt = HAL_I2C_FAILED;
 224              		.loc 1 103 1 is_stmt 1 view -0
 225              		.cfi_startproc
 226              		@ args = 0, pretend = 0, frame = 0
 227              		@ frame_needed = 0, uses_anonymous_args = 0
 103:Core/Src/hal_i2c.c ****   hal_i2c_stt_e stt = HAL_I2C_FAILED;
 228              		.loc 1 103 1 is_stmt 0 view .LVU56
 229 0000 10B5     		push	{r4, lr}
 230              	.LCFI4:
 231              		.cfi_def_cfa_offset 8
 232              		.cfi_offset 4, -8
ARM GAS  C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s 			page 10


 233              		.cfi_offset 14, -4
 234 0002 0C46     		mov	r4, r1
 104:Core/Src/hal_i2c.c ****   int32_t idx = hal_i2c_handle_idx(handle);
 235              		.loc 1 104 3 is_stmt 1 view .LVU57
 236              	.LVL13:
 105:Core/Src/hal_i2c.c ****   if (idx >= 0)
 237              		.loc 1 105 3 view .LVU58
 105:Core/Src/hal_i2c.c ****   if (idx >= 0)
 238              		.loc 1 105 17 is_stmt 0 view .LVU59
 239 0004 FFF7FEFF 		bl	hal_i2c_handle_idx
 240              	.LVL14:
 106:Core/Src/hal_i2c.c ****   {
 241              		.loc 1 106 3 is_stmt 1 view .LVU60
 106:Core/Src/hal_i2c.c ****   {
 242              		.loc 1 106 6 is_stmt 0 view .LVU61
 243 0008 0028     		cmp	r0, #0
 106:Core/Src/hal_i2c.c ****   {
 244              		.loc 1 106 6 view .LVU62
 245 000a 03DB     		blt	.L17
 108:Core/Src/hal_i2c.c ****     stt = HAL_I2C_SUCCESS;
 246              		.loc 1 108 5 is_stmt 1 view .LVU63
 108:Core/Src/hal_i2c.c ****     stt = HAL_I2C_SUCCESS;
 247              		.loc 1 108 21 is_stmt 0 view .LVU64
 248 000c 024B     		ldr	r3, .L19
 249 000e 1C54     		strb	r4, [r3, r0]
 109:Core/Src/hal_i2c.c ****   }
 250              		.loc 1 109 5 is_stmt 1 view .LVU65
 251              	.LVL15:
 109:Core/Src/hal_i2c.c ****   }
 252              		.loc 1 109 9 is_stmt 0 view .LVU66
 253 0010 0020     		movs	r0, #0
 254              	.LVL16:
 255              	.L16:
 111:Core/Src/hal_i2c.c **** }
 256              		.loc 1 111 3 is_stmt 1 view .LVU67
 112:Core/Src/hal_i2c.c **** 
 257              		.loc 1 112 1 is_stmt 0 view .LVU68
 258 0012 10BD     		pop	{r4, pc}
 259              	.LVL17:
 260              	.L17:
 104:Core/Src/hal_i2c.c ****   int32_t idx = hal_i2c_handle_idx(handle);
 261              		.loc 1 104 17 view .LVU69
 262 0014 0120     		movs	r0, #1
 263              	.LVL18:
 104:Core/Src/hal_i2c.c ****   int32_t idx = hal_i2c_handle_idx(handle);
 264              		.loc 1 104 17 view .LVU70
 265 0016 FCE7     		b	.L16
 266              	.L20:
 267              		.align	2
 268              	.L19:
 269 0018 00000000 		.word	slave_addr
 270              		.cfi_endproc
 271              	.LFE67:
 273              		.section	.text.hal_i2c_read,"ax",%progbits
 274              		.align	1
 275              		.global	hal_i2c_read
 276              		.syntax unified
ARM GAS  C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s 			page 11


 277              		.thumb
 278              		.thumb_func
 280              	hal_i2c_read:
 281              	.LVL19:
 282              	.LFB68:
 124:Core/Src/hal_i2c.c ****   hal_i2c_stt_e stt = HAL_I2C_FAILED;
 283              		.loc 1 124 1 is_stmt 1 view -0
 284              		.cfi_startproc
 285              		@ args = 4, pretend = 0, frame = 0
 286              		@ frame_needed = 0, uses_anonymous_args = 0
 124:Core/Src/hal_i2c.c ****   hal_i2c_stt_e stt = HAL_I2C_FAILED;
 287              		.loc 1 124 1 is_stmt 0 view .LVU72
 288 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 289              	.LCFI5:
 290              		.cfi_def_cfa_offset 24
 291              		.cfi_offset 4, -24
 292              		.cfi_offset 5, -20
 293              		.cfi_offset 6, -16
 294              		.cfi_offset 7, -12
 295              		.cfi_offset 8, -8
 296              		.cfi_offset 14, -4
 297 0004 82B0     		sub	sp, sp, #8
 298              	.LCFI6:
 299              		.cfi_def_cfa_offset 32
 300 0006 0546     		mov	r5, r0
 301 0008 0F46     		mov	r7, r1
 302 000a 1446     		mov	r4, r2
 303 000c 1E46     		mov	r6, r3
 304 000e BDF82080 		ldrh	r8, [sp, #32]
 125:Core/Src/hal_i2c.c ****   HAL_StatusTypeDef hwstt;
 305              		.loc 1 125 3 is_stmt 1 view .LVU73
 306              	.LVL20:
 126:Core/Src/hal_i2c.c ****   int32_t idx = hal_i2c_handle_idx(handle);
 307              		.loc 1 126 3 view .LVU74
 127:Core/Src/hal_i2c.c ****   if (len_addr == 0)
 308              		.loc 1 127 3 view .LVU75
 127:Core/Src/hal_i2c.c ****   if (len_addr == 0)
 309              		.loc 1 127 17 is_stmt 0 view .LVU76
 310 0012 FFF7FEFF 		bl	hal_i2c_handle_idx
 311              	.LVL21:
 128:Core/Src/hal_i2c.c ****   {
 312              		.loc 1 128 3 is_stmt 1 view .LVU77
 128:Core/Src/hal_i2c.c ****   {
 313              		.loc 1 128 6 is_stmt 0 view .LVU78
 314 0016 5CB9     		cbnz	r4, .L22
 133:Core/Src/hal_i2c.c **** #endif
 315              		.loc 1 133 5 is_stmt 1 view .LVU79
 133:Core/Src/hal_i2c.c **** #endif
 316              		.loc 1 133 13 is_stmt 0 view .LVU80
 317 0018 4346     		mov	r3, r8
 318 001a 3246     		mov	r2, r6
 319 001c 0A49     		ldr	r1, .L26
 320 001e 095C     		ldrb	r1, [r1, r0]	@ zero_extendqisi2
 321 0020 2846     		mov	r0, r5
 322              	.LVL22:
 133:Core/Src/hal_i2c.c **** #endif
 323              		.loc 1 133 13 view .LVU81
ARM GAS  C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s 			page 12


 324 0022 FFF7FEFF 		bl	HAL_I2C_Master_Receive_IT
 325              	.LVL23:
 326              	.L23:
 146:Core/Src/hal_i2c.c ****   {
 327              		.loc 1 146 3 is_stmt 1 view .LVU82
 146:Core/Src/hal_i2c.c ****   {
 328              		.loc 1 146 6 is_stmt 0 view .LVU83
 329 0026 00B1     		cbz	r0, .L24
 125:Core/Src/hal_i2c.c ****   HAL_StatusTypeDef hwstt;
 330              		.loc 1 125 17 view .LVU84
 331 0028 0120     		movs	r0, #1
 332              	.LVL24:
 333              	.L24:
 151:Core/Src/hal_i2c.c **** }
 334              		.loc 1 151 3 is_stmt 1 view .LVU85
 152:Core/Src/hal_i2c.c **** /**
 335              		.loc 1 152 1 is_stmt 0 view .LVU86
 336 002a 02B0     		add	sp, sp, #8
 337              	.LCFI7:
 338              		.cfi_remember_state
 339              		.cfi_def_cfa_offset 24
 340              		@ sp needed
 341 002c BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 342              	.LVL25:
 343              	.L22:
 344              	.LCFI8:
 345              		.cfi_restore_state
 142:Core/Src/hal_i2c.c ****                                 len_addr, buf, len);
 346              		.loc 1 142 5 is_stmt 1 view .LVU87
 142:Core/Src/hal_i2c.c ****                                 len_addr, buf, len);
 347              		.loc 1 142 13 is_stmt 0 view .LVU88
 348 0030 CDF80480 		str	r8, [sp, #4]
 349 0034 0096     		str	r6, [sp]
 350 0036 2346     		mov	r3, r4
 351 0038 3A46     		mov	r2, r7
 352 003a 0349     		ldr	r1, .L26
 353 003c 095C     		ldrb	r1, [r1, r0]	@ zero_extendqisi2
 354 003e 2846     		mov	r0, r5
 355              	.LVL26:
 142:Core/Src/hal_i2c.c ****                                 len_addr, buf, len);
 356              		.loc 1 142 13 view .LVU89
 357 0040 FFF7FEFF 		bl	HAL_I2C_Mem_Read_IT
 358              	.LVL27:
 142:Core/Src/hal_i2c.c ****                                 len_addr, buf, len);
 359              		.loc 1 142 13 view .LVU90
 360 0044 EFE7     		b	.L23
 361              	.L27:
 362 0046 00BF     		.align	2
 363              	.L26:
 364 0048 00000000 		.word	slave_addr
 365              		.cfi_endproc
 366              	.LFE68:
 368              		.section	.text.hal_i2c_write,"ax",%progbits
 369              		.align	1
 370              		.global	hal_i2c_write
 371              		.syntax unified
 372              		.thumb
ARM GAS  C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s 			page 13


 373              		.thumb_func
 375              	hal_i2c_write:
 376              	.LVL28:
 377              	.LFB69:
 163:Core/Src/hal_i2c.c ****   hal_i2c_stt_e stt = HAL_I2C_FAILED;
 378              		.loc 1 163 1 is_stmt 1 view -0
 379              		.cfi_startproc
 380              		@ args = 4, pretend = 0, frame = 0
 381              		@ frame_needed = 0, uses_anonymous_args = 0
 163:Core/Src/hal_i2c.c ****   hal_i2c_stt_e stt = HAL_I2C_FAILED;
 382              		.loc 1 163 1 is_stmt 0 view .LVU92
 383 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 384              	.LCFI9:
 385              		.cfi_def_cfa_offset 24
 386              		.cfi_offset 4, -24
 387              		.cfi_offset 5, -20
 388              		.cfi_offset 6, -16
 389              		.cfi_offset 7, -12
 390              		.cfi_offset 8, -8
 391              		.cfi_offset 14, -4
 392 0004 82B0     		sub	sp, sp, #8
 393              	.LCFI10:
 394              		.cfi_def_cfa_offset 32
 395 0006 0546     		mov	r5, r0
 396 0008 0F46     		mov	r7, r1
 397 000a 1446     		mov	r4, r2
 398 000c 1E46     		mov	r6, r3
 399 000e BDF82080 		ldrh	r8, [sp, #32]
 164:Core/Src/hal_i2c.c ****   HAL_StatusTypeDef hwstt;
 400              		.loc 1 164 3 is_stmt 1 view .LVU93
 401              	.LVL29:
 165:Core/Src/hal_i2c.c ****   int32_t idx = hal_i2c_handle_idx(handle);
 402              		.loc 1 165 3 view .LVU94
 166:Core/Src/hal_i2c.c ****   if (len_addr == 0)
 403              		.loc 1 166 3 view .LVU95
 166:Core/Src/hal_i2c.c ****   if (len_addr == 0)
 404              		.loc 1 166 17 is_stmt 0 view .LVU96
 405 0012 FFF7FEFF 		bl	hal_i2c_handle_idx
 406              	.LVL30:
 167:Core/Src/hal_i2c.c ****   {
 407              		.loc 1 167 3 is_stmt 1 view .LVU97
 167:Core/Src/hal_i2c.c ****   {
 408              		.loc 1 167 6 is_stmt 0 view .LVU98
 409 0016 5CB9     		cbnz	r4, .L29
 172:Core/Src/hal_i2c.c **** #endif
 410              		.loc 1 172 5 is_stmt 1 view .LVU99
 172:Core/Src/hal_i2c.c **** #endif
 411              		.loc 1 172 13 is_stmt 0 view .LVU100
 412 0018 4346     		mov	r3, r8
 413 001a 3246     		mov	r2, r6
 414 001c 0A49     		ldr	r1, .L33
 415 001e 095C     		ldrb	r1, [r1, r0]	@ zero_extendqisi2
 416 0020 2846     		mov	r0, r5
 417              	.LVL31:
 172:Core/Src/hal_i2c.c **** #endif
 418              		.loc 1 172 13 view .LVU101
 419 0022 FFF7FEFF 		bl	HAL_I2C_Master_Transmit_IT
ARM GAS  C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s 			page 14


 420              	.LVL32:
 421              	.L30:
 185:Core/Src/hal_i2c.c ****   {
 422              		.loc 1 185 3 is_stmt 1 view .LVU102
 185:Core/Src/hal_i2c.c ****   {
 423              		.loc 1 185 6 is_stmt 0 view .LVU103
 424 0026 00B1     		cbz	r0, .L31
 164:Core/Src/hal_i2c.c ****   HAL_StatusTypeDef hwstt;
 425              		.loc 1 164 17 view .LVU104
 426 0028 0120     		movs	r0, #1
 427              	.LVL33:
 428              	.L31:
 189:Core/Src/hal_i2c.c **** }
 429              		.loc 1 189 3 is_stmt 1 view .LVU105
 190:Core/Src/hal_i2c.c **** /**
 430              		.loc 1 190 1 is_stmt 0 view .LVU106
 431 002a 02B0     		add	sp, sp, #8
 432              	.LCFI11:
 433              		.cfi_remember_state
 434              		.cfi_def_cfa_offset 24
 435              		@ sp needed
 436 002c BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 437              	.LVL34:
 438              	.L29:
 439              	.LCFI12:
 440              		.cfi_restore_state
 181:Core/Src/hal_i2c.c ****                                  len_addr, buf, len);
 441              		.loc 1 181 5 is_stmt 1 view .LVU107
 181:Core/Src/hal_i2c.c ****                                  len_addr, buf, len);
 442              		.loc 1 181 13 is_stmt 0 view .LVU108
 443 0030 CDF80480 		str	r8, [sp, #4]
 444 0034 0096     		str	r6, [sp]
 445 0036 2346     		mov	r3, r4
 446 0038 3A46     		mov	r2, r7
 447 003a 0349     		ldr	r1, .L33
 448 003c 095C     		ldrb	r1, [r1, r0]	@ zero_extendqisi2
 449 003e 2846     		mov	r0, r5
 450              	.LVL35:
 181:Core/Src/hal_i2c.c ****                                  len_addr, buf, len);
 451              		.loc 1 181 13 view .LVU109
 452 0040 FFF7FEFF 		bl	HAL_I2C_Mem_Write_IT
 453              	.LVL36:
 181:Core/Src/hal_i2c.c ****                                  len_addr, buf, len);
 454              		.loc 1 181 13 view .LVU110
 455 0044 EFE7     		b	.L30
 456              	.L34:
 457 0046 00BF     		.align	2
 458              	.L33:
 459 0048 00000000 		.word	slave_addr
 460              		.cfi_endproc
 461              	.LFE69:
 463              		.section	.text.hal_i2c_cancel,"ax",%progbits
 464              		.align	1
 465              		.global	hal_i2c_cancel
 466              		.syntax unified
 467              		.thumb
 468              		.thumb_func
ARM GAS  C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s 			page 15


 470              	hal_i2c_cancel:
 471              	.LVL37:
 472              	.LFB70:
 198:Core/Src/hal_i2c.c ****   hal_i2c_stt_e stt = HAL_I2C_FAILED;
 473              		.loc 1 198 1 is_stmt 1 view -0
 474              		.cfi_startproc
 475              		@ args = 0, pretend = 0, frame = 0
 476              		@ frame_needed = 0, uses_anonymous_args = 0
 477              		@ link register save eliminated.
 199:Core/Src/hal_i2c.c ****   return stt;
 478              		.loc 1 199 3 view .LVU112
 200:Core/Src/hal_i2c.c **** }
 479              		.loc 1 200 3 view .LVU113
 201:Core/Src/hal_i2c.c **** /**
 480              		.loc 1 201 1 is_stmt 0 view .LVU114
 481 0000 0120     		movs	r0, #1
 482              	.LVL38:
 201:Core/Src/hal_i2c.c **** /**
 483              		.loc 1 201 1 view .LVU115
 484 0002 7047     		bx	lr
 485              		.cfi_endproc
 486              	.LFE70:
 488              		.section	.text.HAL_I2C_MemTxCpltCallback,"ax",%progbits
 489              		.align	1
 490              		.global	HAL_I2C_MemTxCpltCallback
 491              		.syntax unified
 492              		.thumb
 493              		.thumb_func
 495              	HAL_I2C_MemTxCpltCallback:
 496              	.LVL39:
 497              	.LFB75:
 244:Core/Src/hal_i2c.c **** /**
 245:Core/Src/hal_i2c.c ****  * @brief  Give semaphore from tranfer callback
 246:Core/Src/hal_i2c.c ****  * @param  halspi: spi instance
 247:Core/Src/hal_i2c.c ****  * @retval HAL_SPI_SUCCESS
 248:Core/Src/hal_i2c.c ****  */
 249:Core/Src/hal_i2c.c **** static void hal_i2c_semaphore_give(hal_i2c_instance_e hali2c)
 250:Core/Src/hal_i2c.c **** {
 251:Core/Src/hal_i2c.c **** }
 252:Core/Src/hal_i2c.c **** 
 253:Core/Src/hal_i2c.c **** void HAL_I2C_MemTxCpltCallback(I2C_HandleTypeDef *hi2c)
 254:Core/Src/hal_i2c.c **** {
 498              		.loc 1 254 1 is_stmt 1 view -0
 499              		.cfi_startproc
 500              		@ args = 0, pretend = 0, frame = 0
 501              		@ frame_needed = 0, uses_anonymous_args = 0
 502              		@ link register save eliminated.
 255:Core/Src/hal_i2c.c ****   int32_t idx = hal_i2c_handle_idx(hi2c);
 503              		.loc 1 255 3 view .LVU117
 256:Core/Src/hal_i2c.c ****   if (idx >= 0)
 504              		.loc 1 256 3 view .LVU118
 257:Core/Src/hal_i2c.c ****   {
 258:Core/Src/hal_i2c.c ****     hal_i2c_semaphore_give(idx);
 505              		.loc 1 258 5 view .LVU119
 259:Core/Src/hal_i2c.c ****   }
 260:Core/Src/hal_i2c.c **** }
 506              		.loc 1 260 1 is_stmt 0 view .LVU120
ARM GAS  C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s 			page 16


 507 0000 7047     		bx	lr
 508              		.cfi_endproc
 509              	.LFE75:
 511              		.section	.text.HAL_I2C_MemRxCpltCallback,"ax",%progbits
 512              		.align	1
 513              		.global	HAL_I2C_MemRxCpltCallback
 514              		.syntax unified
 515              		.thumb
 516              		.thumb_func
 518              	HAL_I2C_MemRxCpltCallback:
 519              	.LVL40:
 520              	.LFB76:
 261:Core/Src/hal_i2c.c **** 
 262:Core/Src/hal_i2c.c **** void HAL_I2C_MemRxCpltCallback(I2C_HandleTypeDef *hi2c)
 263:Core/Src/hal_i2c.c **** {
 521              		.loc 1 263 1 is_stmt 1 view -0
 522              		.cfi_startproc
 523              		@ args = 0, pretend = 0, frame = 0
 524              		@ frame_needed = 0, uses_anonymous_args = 0
 525              		@ link register save eliminated.
 264:Core/Src/hal_i2c.c ****   int32_t idx = hal_i2c_handle_idx(hi2c);
 526              		.loc 1 264 3 view .LVU122
 265:Core/Src/hal_i2c.c ****   if (idx >= 0)
 527              		.loc 1 265 3 view .LVU123
 266:Core/Src/hal_i2c.c ****   {
 267:Core/Src/hal_i2c.c ****     hal_i2c_semaphore_give(idx);
 528              		.loc 1 267 5 view .LVU124
 268:Core/Src/hal_i2c.c ****   }
 269:Core/Src/hal_i2c.c **** }
 529              		.loc 1 269 1 is_stmt 0 view .LVU125
 530 0000 7047     		bx	lr
 531              		.cfi_endproc
 532              	.LFE76:
 534              		.section	.text.HAL_I2C_MasterTxCpltCallback,"ax",%progbits
 535              		.align	1
 536              		.global	HAL_I2C_MasterTxCpltCallback
 537              		.syntax unified
 538              		.thumb
 539              		.thumb_func
 541              	HAL_I2C_MasterTxCpltCallback:
 542              	.LVL41:
 543              	.LFB77:
 270:Core/Src/hal_i2c.c **** void HAL_I2C_MasterTxCpltCallback(I2C_HandleTypeDef *hi2c)
 271:Core/Src/hal_i2c.c **** {
 544              		.loc 1 271 1 is_stmt 1 view -0
 545              		.cfi_startproc
 546              		@ args = 0, pretend = 0, frame = 0
 547              		@ frame_needed = 0, uses_anonymous_args = 0
 548              		@ link register save eliminated.
 272:Core/Src/hal_i2c.c ****   int32_t idx = hal_i2c_handle_idx(hi2c);
 549              		.loc 1 272 3 view .LVU127
 273:Core/Src/hal_i2c.c ****   if (idx >= 0)
 550              		.loc 1 273 3 view .LVU128
 274:Core/Src/hal_i2c.c ****   {
 275:Core/Src/hal_i2c.c ****     hal_i2c_semaphore_give(idx);
 551              		.loc 1 275 5 view .LVU129
 276:Core/Src/hal_i2c.c ****   }
ARM GAS  C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s 			page 17


 277:Core/Src/hal_i2c.c **** }
 552              		.loc 1 277 1 is_stmt 0 view .LVU130
 553 0000 7047     		bx	lr
 554              		.cfi_endproc
 555              	.LFE77:
 557              		.section	.text.HAL_I2C_MasterRxCpltCallback,"ax",%progbits
 558              		.align	1
 559              		.global	HAL_I2C_MasterRxCpltCallback
 560              		.syntax unified
 561              		.thumb
 562              		.thumb_func
 564              	HAL_I2C_MasterRxCpltCallback:
 565              	.LVL42:
 566              	.LFB78:
 278:Core/Src/hal_i2c.c **** void HAL_I2C_MasterRxCpltCallback(I2C_HandleTypeDef *hi2c)
 279:Core/Src/hal_i2c.c **** {
 567              		.loc 1 279 1 is_stmt 1 view -0
 568              		.cfi_startproc
 569              		@ args = 0, pretend = 0, frame = 0
 570              		@ frame_needed = 0, uses_anonymous_args = 0
 571              		@ link register save eliminated.
 280:Core/Src/hal_i2c.c ****   int32_t idx = hal_i2c_handle_idx(hi2c);
 572              		.loc 1 280 3 view .LVU132
 281:Core/Src/hal_i2c.c ****   if (idx >= 0)
 573              		.loc 1 281 3 view .LVU133
 282:Core/Src/hal_i2c.c ****   {
 283:Core/Src/hal_i2c.c ****     hal_i2c_semaphore_give(idx);
 574              		.loc 1 283 5 view .LVU134
 284:Core/Src/hal_i2c.c ****   }
 285:Core/Src/hal_i2c.c **** }
 575              		.loc 1 285 1 is_stmt 0 view .LVU135
 576 0000 7047     		bx	lr
 577              		.cfi_endproc
 578              	.LFE78:
 580              		.section	.text.hal_i2c_MspInit,"ax",%progbits
 581              		.align	1
 582              		.global	hal_i2c_MspInit
 583              		.syntax unified
 584              		.thumb
 585              		.thumb_func
 587              	hal_i2c_MspInit:
 588              	.LVL43:
 589              	.LFB79:
 286:Core/Src/hal_i2c.c **** /**
 287:Core/Src/hal_i2c.c ****  * @brief I2C MSP Initialization
 288:Core/Src/hal_i2c.c ****  *        This function configures the hardware resources used in this example:
 289:Core/Src/hal_i2c.c ****  *           - Peripheral's clock enable
 290:Core/Src/hal_i2c.c ****  *           - Peripheral's GPIO Configuration
 291:Core/Src/hal_i2c.c ****  *           - DMA configuration for transmission request by peripheral
 292:Core/Src/hal_i2c.c ****  *           - NVIC configuration for DMA interrupt request enable
 293:Core/Src/hal_i2c.c ****  * @param hi2c: I2C handle pointer
 294:Core/Src/hal_i2c.c ****  * @retval None
 295:Core/Src/hal_i2c.c ****  */
 296:Core/Src/hal_i2c.c **** void hal_i2c_MspInit(I2C_HandleTypeDef *hi2c)
 297:Core/Src/hal_i2c.c **** {
 590              		.loc 1 297 1 is_stmt 1 view -0
 591              		.cfi_startproc
ARM GAS  C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s 			page 18


 592              		@ args = 0, pretend = 0, frame = 16
 593              		@ frame_needed = 0, uses_anonymous_args = 0
 594              		.loc 1 297 1 is_stmt 0 view .LVU137
 595 0000 30B5     		push	{r4, r5, lr}
 596              	.LCFI13:
 597              		.cfi_def_cfa_offset 12
 598              		.cfi_offset 4, -12
 599              		.cfi_offset 5, -8
 600              		.cfi_offset 14, -4
 601 0002 85B0     		sub	sp, sp, #20
 602              	.LCFI14:
 603              		.cfi_def_cfa_offset 32
 298:Core/Src/hal_i2c.c ****   int32_t idx;
 604              		.loc 1 298 3 is_stmt 1 view .LVU138
 299:Core/Src/hal_i2c.c ****   idx = hal_i2c_handle_idx(hi2c);
 605              		.loc 1 299 3 view .LVU139
 606              		.loc 1 299 9 is_stmt 0 view .LVU140
 607 0004 FFF7FEFF 		bl	hal_i2c_handle_idx
 608              	.LVL44:
 300:Core/Src/hal_i2c.c ****   if ((idx >= 0) && (idx < HAL_I2C_NUM))
 609              		.loc 1 300 3 is_stmt 1 view .LVU141
 610              		.loc 1 300 6 is_stmt 0 view .LVU142
 611 0008 0128     		cmp	r0, #1
 612 000a 01D9     		bls	.L49
 613              	.LVL45:
 614              	.L40:
 301:Core/Src/hal_i2c.c ****   {
 302:Core/Src/hal_i2c.c ****     /*##-1- Enable peripherals and GPIO Clocks #################################*/
 303:Core/Src/hal_i2c.c ****     /* Enable I2Cx clock */
 304:Core/Src/hal_i2c.c ****     switch (idx)
 305:Core/Src/hal_i2c.c ****     {
 306:Core/Src/hal_i2c.c ****     case HAL_I2C0:
 307:Core/Src/hal_i2c.c ****       I2CI0_CLK_ENABLE();
 308:Core/Src/hal_i2c.c ****       break;
 309:Core/Src/hal_i2c.c ****     case HAL_I2C1:
 310:Core/Src/hal_i2c.c ****       I2CI1_CLK_ENABLE();
 311:Core/Src/hal_i2c.c ****       break;
 312:Core/Src/hal_i2c.c ****     default:
 313:Core/Src/hal_i2c.c ****       break;
 314:Core/Src/hal_i2c.c ****     }
 315:Core/Src/hal_i2c.c ****     /* Enable DMAx clock */
 316:Core/Src/hal_i2c.c **** 
 317:Core/Src/hal_i2c.c ****     hal_gpio_mode_t mode;
 318:Core/Src/hal_i2c.c ****     mode.mode = HAL_GPIO_AF_OD;
 319:Core/Src/hal_i2c.c ****     mode.pull = HAL_GPIO_PULL_UP;
 320:Core/Src/hal_i2c.c ****     mode.func = (hal_gpio_alt_e)sda_pin_func[idx];
 321:Core/Src/hal_i2c.c ****     mode.int_cb = NULL;
 322:Core/Src/hal_i2c.c ****     hal_gpio_pin_config((hal_gpio_t)sda_pin[idx], mode);
 323:Core/Src/hal_i2c.c ****     mode.func = (hal_gpio_alt_e)scl_pin_func[idx];
 324:Core/Src/hal_i2c.c ****     hal_gpio_pin_config((hal_gpio_t)scl_pin[idx], mode);
 325:Core/Src/hal_i2c.c **** 
 326:Core/Src/hal_i2c.c **** /*##-3- Configure the DMA Channels #########################################*/
 327:Core/Src/hal_i2c.c **** /* Configure the DMA handler for Transmission process */
 328:Core/Src/hal_i2c.c **** #if I2C_USE_DMA
 329:Core/Src/hal_i2c.c ****     DMA2_CLK_ENABLE();
 330:Core/Src/hal_i2c.c ****     switch (idx)
 331:Core/Src/hal_i2c.c ****     {
ARM GAS  C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s 			page 19


 332:Core/Src/hal_i2c.c ****     case HAL_I2C0:
 333:Core/Src/hal_i2c.c ****       hdma_i2c_tx[idx].Instance = I2CI0_DMA_INSTANCE_TX;
 334:Core/Src/hal_i2c.c ****       hdma_i2c_tx[idx].Init.Request = I2CI0_DMA_REQUEST_TX;
 335:Core/Src/hal_i2c.c ****       hdma_i2c_rx[idx].Instance = I2CI0_DMA_INSTANCE_RX;
 336:Core/Src/hal_i2c.c ****       hdma_i2c_rx[idx].Init.Request = I2CI0_DMA_REQUEST_RX;
 337:Core/Src/hal_i2c.c ****       break;
 338:Core/Src/hal_i2c.c ****     case HAL_I2C1:
 339:Core/Src/hal_i2c.c ****       hdma_i2c_tx[idx].Instance = I2CI1_DMA_INSTANCE_TX;
 340:Core/Src/hal_i2c.c ****       hdma_i2c_tx[idx].Init.Request = I2CI1_DMA_REQUEST_TX;
 341:Core/Src/hal_i2c.c ****       hdma_i2c_rx[idx].Instance = I2CI1_DMA_INSTANCE_RX;
 342:Core/Src/hal_i2c.c ****       hdma_i2c_rx[idx].Init.Request = I2CI1_DMA_REQUEST_RX;
 343:Core/Src/hal_i2c.c ****       break;
 344:Core/Src/hal_i2c.c ****     case HAL_I2C2:
 345:Core/Src/hal_i2c.c ****       hdma_i2c_tx[idx].Instance = I2CI2_DMA_INSTANCE_TX;
 346:Core/Src/hal_i2c.c ****       hdma_i2c_tx[idx].Init.Request = I2CI2_DMA_REQUEST_TX;
 347:Core/Src/hal_i2c.c ****       hdma_i2c_rx[idx].Instance = I2CI2_DMA_INSTANCE_RX;
 348:Core/Src/hal_i2c.c ****       hdma_i2c_rx[idx].Init.Request = I2CI2_DMA_REQUEST_RX;
 349:Core/Src/hal_i2c.c ****       break;
 350:Core/Src/hal_i2c.c ****     }
 351:Core/Src/hal_i2c.c **** 
 352:Core/Src/hal_i2c.c ****     hdma_i2c_tx[idx].Init.Direction = DMA_MEMORY_TO_PERIPH;
 353:Core/Src/hal_i2c.c ****     hdma_i2c_tx[idx].Init.PeriphInc = DMA_PINC_DISABLE;
 354:Core/Src/hal_i2c.c ****     hdma_i2c_tx[idx].Init.MemInc = DMA_MINC_ENABLE;
 355:Core/Src/hal_i2c.c ****     hdma_i2c_tx[idx].Init.PeriphDataAlignment = DMA_PDATAALIGN_BYTE;
 356:Core/Src/hal_i2c.c ****     hdma_i2c_tx[idx].Init.MemDataAlignment = DMA_MDATAALIGN_BYTE;
 357:Core/Src/hal_i2c.c ****     hdma_i2c_tx[idx].Init.Mode = DMA_NORMAL;
 358:Core/Src/hal_i2c.c ****     hdma_i2c_tx[idx].Init.Priority = DMA_PRIORITY_LOW;
 359:Core/Src/hal_i2c.c **** 
 360:Core/Src/hal_i2c.c ****     HAL_DMA_Init(&hdma_i2c_tx[idx]);
 361:Core/Src/hal_i2c.c **** 
 362:Core/Src/hal_i2c.c ****     /* Associate the initialized DMA handle to the the I2C handle */
 363:Core/Src/hal_i2c.c ****     __HAL_LINKDMA(hi2c, hdmatx, hdma_i2c_tx[idx]);
 364:Core/Src/hal_i2c.c **** 
 365:Core/Src/hal_i2c.c ****     /* Configure the DMA handler for Transmission process */
 366:Core/Src/hal_i2c.c **** 
 367:Core/Src/hal_i2c.c ****     hdma_i2c_rx[idx].Init.Direction = DMA_PERIPH_TO_MEMORY;
 368:Core/Src/hal_i2c.c ****     hdma_i2c_rx[idx].Init.PeriphInc = DMA_PINC_DISABLE;
 369:Core/Src/hal_i2c.c ****     hdma_i2c_rx[idx].Init.MemInc = DMA_MINC_ENABLE;
 370:Core/Src/hal_i2c.c ****     hdma_i2c_rx[idx].Init.PeriphDataAlignment = DMA_PDATAALIGN_BYTE;
 371:Core/Src/hal_i2c.c ****     hdma_i2c_rx[idx].Init.MemDataAlignment = DMA_MDATAALIGN_BYTE;
 372:Core/Src/hal_i2c.c ****     hdma_i2c_rx[idx].Init.Mode = DMA_NORMAL;
 373:Core/Src/hal_i2c.c ****     hdma_i2c_rx[idx].Init.Priority = DMA_PRIORITY_HIGH;
 374:Core/Src/hal_i2c.c **** 
 375:Core/Src/hal_i2c.c ****     HAL_DMA_Init(&hdma_i2c_rx[idx]);
 376:Core/Src/hal_i2c.c **** 
 377:Core/Src/hal_i2c.c ****     /* Associate the initialized DMA handle to the the I2C handle */
 378:Core/Src/hal_i2c.c ****     __HAL_LINKDMA(hi2c, hdmarx, hdma_i2c_rx[idx]);
 379:Core/Src/hal_i2c.c **** #endif
 380:Core/Src/hal_i2c.c ****     /*##-4- Configure the NVIC for DMA #########################################*/
 381:Core/Src/hal_i2c.c ****     switch (idx)
 382:Core/Src/hal_i2c.c ****     {
 383:Core/Src/hal_i2c.c ****     case HAL_I2C0:
 384:Core/Src/hal_i2c.c **** #if I2C_USE_DMA
 385:Core/Src/hal_i2c.c ****       /* NVIC configuration for DMA transfer complete interrupt (I2Cx_TX) */
 386:Core/Src/hal_i2c.c ****       HAL_NVIC_SetPriority(I2CI0_DMA_TX_IRQn, 0, 1);
 387:Core/Src/hal_i2c.c ****       HAL_NVIC_EnableIRQ(I2CI0_DMA_TX_IRQn);
 388:Core/Src/hal_i2c.c **** 
ARM GAS  C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s 			page 20


 389:Core/Src/hal_i2c.c ****       /* NVIC configuration for DMA transfer complete interrupt (I2Cx_RX) */
 390:Core/Src/hal_i2c.c ****       HAL_NVIC_SetPriority(I2CI0_DMA_RX_IRQn, 0, 0);
 391:Core/Src/hal_i2c.c ****       HAL_NVIC_EnableIRQ(I2CI0_DMA_RX_IRQn);
 392:Core/Src/hal_i2c.c **** #endif
 393:Core/Src/hal_i2c.c ****       /*##-5- Configure the NVIC for I2C ########################################*/
 394:Core/Src/hal_i2c.c ****       /* NVIC for I2Cx */
 395:Core/Src/hal_i2c.c ****       HAL_NVIC_SetPriority(I2CI0_ER_IRQn, 1, 1);
 396:Core/Src/hal_i2c.c ****       HAL_NVIC_EnableIRQ(I2CI0_ER_IRQn);
 397:Core/Src/hal_i2c.c ****       HAL_NVIC_SetPriority(I2CI0_EV_IRQn, 1, 2);
 398:Core/Src/hal_i2c.c ****       HAL_NVIC_EnableIRQ(I2CI0_EV_IRQn);
 399:Core/Src/hal_i2c.c ****       break;
 400:Core/Src/hal_i2c.c ****     case HAL_I2C1:
 401:Core/Src/hal_i2c.c **** /* NVIC configuration for DMA transfer complete interrupt (I2Cx_TX) */
 402:Core/Src/hal_i2c.c **** #if I2C_USE_DMA
 403:Core/Src/hal_i2c.c ****       HAL_NVIC_SetPriority(I2CI1_DMA_TX_IRQn, 0, 1);
 404:Core/Src/hal_i2c.c ****       HAL_NVIC_EnableIRQ(I2CI1_DMA_TX_IRQn);
 405:Core/Src/hal_i2c.c **** 
 406:Core/Src/hal_i2c.c ****       /* NVIC configuration for DMA transfer complete interrupt (I2Cx_RX) */
 407:Core/Src/hal_i2c.c ****       HAL_NVIC_SetPriority(I2CI1_DMA_RX_IRQn, 0, 0);
 408:Core/Src/hal_i2c.c ****       HAL_NVIC_EnableIRQ(I2CI1_DMA_RX_IRQn);
 409:Core/Src/hal_i2c.c **** #endif
 410:Core/Src/hal_i2c.c ****       /*##-5- Configure the NVIC for I2C ########################################*/
 411:Core/Src/hal_i2c.c ****       /* NVIC for I2Cx */
 412:Core/Src/hal_i2c.c ****       HAL_NVIC_SetPriority(I2CI1_ER_IRQn, 1, 1);
 413:Core/Src/hal_i2c.c ****       HAL_NVIC_EnableIRQ(I2CI1_ER_IRQn);
 414:Core/Src/hal_i2c.c ****       HAL_NVIC_SetPriority(I2CI1_EV_IRQn, 1, 2);
 415:Core/Src/hal_i2c.c ****       HAL_NVIC_EnableIRQ(I2CI1_EV_IRQn);
 416:Core/Src/hal_i2c.c ****       break;
 417:Core/Src/hal_i2c.c ****     }
 418:Core/Src/hal_i2c.c ****   }
 419:Core/Src/hal_i2c.c **** }
 615              		.loc 1 419 1 view .LVU143
 616 000c 05B0     		add	sp, sp, #20
 617              	.LCFI15:
 618              		.cfi_remember_state
 619              		.cfi_def_cfa_offset 12
 620              		@ sp needed
 621 000e 30BD     		pop	{r4, r5, pc}
 622              	.LVL46:
 623              	.L49:
 624              	.LCFI16:
 625              		.cfi_restore_state
 626              		.loc 1 419 1 view .LVU144
 627 0010 0446     		mov	r4, r0
 628              	.LBB3:
 304:Core/Src/hal_i2c.c ****     {
 629              		.loc 1 304 5 is_stmt 1 view .LVU145
 630 0012 60B1     		cbz	r0, .L42
 304:Core/Src/hal_i2c.c ****     {
 631              		.loc 1 304 5 is_stmt 0 view .LVU146
 632 0014 0128     		cmp	r0, #1
 633 0016 14D1     		bne	.L44
 310:Core/Src/hal_i2c.c ****       break;
 634              		.loc 1 310 7 is_stmt 1 view .LVU147
 635              	.LBB4:
 310:Core/Src/hal_i2c.c ****       break;
 636              		.loc 1 310 7 view .LVU148
ARM GAS  C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s 			page 21


 310:Core/Src/hal_i2c.c ****       break;
 637              		.loc 1 310 7 view .LVU149
 638 0018 2D4B     		ldr	r3, .L50
 639 001a DA69     		ldr	r2, [r3, #28]
 640 001c 42F48002 		orr	r2, r2, #4194304
 641 0020 DA61     		str	r2, [r3, #28]
 310:Core/Src/hal_i2c.c ****       break;
 642              		.loc 1 310 7 view .LVU150
 643 0022 DB69     		ldr	r3, [r3, #28]
 644 0024 03F48003 		and	r3, r3, #4194304
 645 0028 0193     		str	r3, [sp, #4]
 310:Core/Src/hal_i2c.c ****       break;
 646              		.loc 1 310 7 view .LVU151
 647 002a 019B     		ldr	r3, [sp, #4]
 648              	.LBE4:
 310:Core/Src/hal_i2c.c ****       break;
 649              		.loc 1 310 7 view .LVU152
 311:Core/Src/hal_i2c.c ****     default:
 650              		.loc 1 311 7 view .LVU153
 651 002c 09E0     		b	.L44
 652              	.L42:
 307:Core/Src/hal_i2c.c ****       break;
 653              		.loc 1 307 7 view .LVU154
 654              	.LBB5:
 307:Core/Src/hal_i2c.c ****       break;
 655              		.loc 1 307 7 view .LVU155
 307:Core/Src/hal_i2c.c ****       break;
 656              		.loc 1 307 7 view .LVU156
 657 002e 284B     		ldr	r3, .L50
 658 0030 DA69     		ldr	r2, [r3, #28]
 659 0032 42F40012 		orr	r2, r2, #2097152
 660 0036 DA61     		str	r2, [r3, #28]
 307:Core/Src/hal_i2c.c ****       break;
 661              		.loc 1 307 7 view .LVU157
 662 0038 DB69     		ldr	r3, [r3, #28]
 663 003a 03F40013 		and	r3, r3, #2097152
 664 003e 0093     		str	r3, [sp]
 307:Core/Src/hal_i2c.c ****       break;
 665              		.loc 1 307 7 view .LVU158
 666 0040 009B     		ldr	r3, [sp]
 667              	.LBE5:
 307:Core/Src/hal_i2c.c ****       break;
 668              		.loc 1 307 7 view .LVU159
 308:Core/Src/hal_i2c.c ****     case HAL_I2C1:
 669              		.loc 1 308 7 view .LVU160
 670              	.L44:
 317:Core/Src/hal_i2c.c ****     mode.mode = HAL_GPIO_AF_OD;
 671              		.loc 1 317 5 view .LVU161
 318:Core/Src/hal_i2c.c ****     mode.pull = HAL_GPIO_PULL_UP;
 672              		.loc 1 318 5 view .LVU162
 318:Core/Src/hal_i2c.c ****     mode.pull = HAL_GPIO_PULL_UP;
 673              		.loc 1 318 15 is_stmt 0 view .LVU163
 674 0042 0423     		movs	r3, #4
 675 0044 8DF80830 		strb	r3, [sp, #8]
 319:Core/Src/hal_i2c.c ****     mode.func = (hal_gpio_alt_e)sda_pin_func[idx];
 676              		.loc 1 319 5 is_stmt 1 view .LVU164
 319:Core/Src/hal_i2c.c ****     mode.func = (hal_gpio_alt_e)sda_pin_func[idx];
ARM GAS  C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s 			page 22


 677              		.loc 1 319 15 is_stmt 0 view .LVU165
 678 0048 0123     		movs	r3, #1
 679 004a 8DF80930 		strb	r3, [sp, #9]
 320:Core/Src/hal_i2c.c ****     mode.int_cb = NULL;
 680              		.loc 1 320 5 is_stmt 1 view .LVU166
 320:Core/Src/hal_i2c.c ****     mode.int_cb = NULL;
 681              		.loc 1 320 17 is_stmt 0 view .LVU167
 682 004e 214B     		ldr	r3, .L50+4
 683 0050 13F81430 		ldrb	r3, [r3, r4, lsl #1]	@ zero_extendqisi2
 320:Core/Src/hal_i2c.c ****     mode.int_cb = NULL;
 684              		.loc 1 320 15 view .LVU168
 685 0054 8DF80A30 		strb	r3, [sp, #10]
 321:Core/Src/hal_i2c.c ****     hal_gpio_pin_config((hal_gpio_t)sda_pin[idx], mode);
 686              		.loc 1 321 5 is_stmt 1 view .LVU169
 321:Core/Src/hal_i2c.c ****     hal_gpio_pin_config((hal_gpio_t)sda_pin[idx], mode);
 687              		.loc 1 321 17 is_stmt 0 view .LVU170
 688 0058 0023     		movs	r3, #0
 689 005a 0393     		str	r3, [sp, #12]
 322:Core/Src/hal_i2c.c ****     mode.func = (hal_gpio_alt_e)scl_pin_func[idx];
 690              		.loc 1 322 5 is_stmt 1 view .LVU171
 691 005c 02AD     		add	r5, sp, #8
 692 005e 95E80600 		ldm	r5, {r1, r2}
 693 0062 1D4B     		ldr	r3, .L50+8
 694 0064 33F81400 		ldrh	r0, [r3, r4, lsl #1]
 695              	.LVL47:
 322:Core/Src/hal_i2c.c ****     mode.func = (hal_gpio_alt_e)scl_pin_func[idx];
 696              		.loc 1 322 5 is_stmt 0 view .LVU172
 697 0068 FFF7FEFF 		bl	hal_gpio_pin_config
 698              	.LVL48:
 323:Core/Src/hal_i2c.c ****     hal_gpio_pin_config((hal_gpio_t)scl_pin[idx], mode);
 699              		.loc 1 323 5 is_stmt 1 view .LVU173
 323:Core/Src/hal_i2c.c ****     hal_gpio_pin_config((hal_gpio_t)scl_pin[idx], mode);
 700              		.loc 1 323 17 is_stmt 0 view .LVU174
 701 006c 1B4B     		ldr	r3, .L50+12
 702 006e 13F81430 		ldrb	r3, [r3, r4, lsl #1]	@ zero_extendqisi2
 323:Core/Src/hal_i2c.c ****     hal_gpio_pin_config((hal_gpio_t)scl_pin[idx], mode);
 703              		.loc 1 323 15 view .LVU175
 704 0072 8DF80A30 		strb	r3, [sp, #10]
 324:Core/Src/hal_i2c.c **** 
 705              		.loc 1 324 5 is_stmt 1 view .LVU176
 706 0076 95E80600 		ldm	r5, {r1, r2}
 707 007a 194B     		ldr	r3, .L50+16
 708 007c 33F81400 		ldrh	r0, [r3, r4, lsl #1]
 709 0080 FFF7FEFF 		bl	hal_gpio_pin_config
 710              	.LVL49:
 381:Core/Src/hal_i2c.c ****     {
 711              		.loc 1 381 5 view .LVU177
 712 0084 94B1     		cbz	r4, .L45
 713 0086 012C     		cmp	r4, #1
 714 0088 C0D1     		bne	.L40
 412:Core/Src/hal_i2c.c ****       HAL_NVIC_EnableIRQ(I2CI1_ER_IRQn);
 715              		.loc 1 412 7 view .LVU178
 716 008a 0122     		movs	r2, #1
 717 008c 1146     		mov	r1, r2
 718 008e 2220     		movs	r0, #34
 719 0090 FFF7FEFF 		bl	HAL_NVIC_SetPriority
 720              	.LVL50:
ARM GAS  C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s 			page 23


 413:Core/Src/hal_i2c.c ****       HAL_NVIC_SetPriority(I2CI1_EV_IRQn, 1, 2);
 721              		.loc 1 413 7 view .LVU179
 722 0094 2220     		movs	r0, #34
 723 0096 FFF7FEFF 		bl	HAL_NVIC_EnableIRQ
 724              	.LVL51:
 414:Core/Src/hal_i2c.c ****       HAL_NVIC_EnableIRQ(I2CI1_EV_IRQn);
 725              		.loc 1 414 7 view .LVU180
 726 009a 0222     		movs	r2, #2
 727 009c 0121     		movs	r1, #1
 728 009e 2120     		movs	r0, #33
 729 00a0 FFF7FEFF 		bl	HAL_NVIC_SetPriority
 730              	.LVL52:
 415:Core/Src/hal_i2c.c ****       break;
 731              		.loc 1 415 7 view .LVU181
 732 00a4 2120     		movs	r0, #33
 733 00a6 FFF7FEFF 		bl	HAL_NVIC_EnableIRQ
 734              	.LVL53:
 416:Core/Src/hal_i2c.c ****     }
 735              		.loc 1 416 7 view .LVU182
 736              	.LBE3:
 737              		.loc 1 419 1 is_stmt 0 view .LVU183
 738 00aa AFE7     		b	.L40
 739              	.L45:
 740              	.LBB6:
 395:Core/Src/hal_i2c.c ****       HAL_NVIC_EnableIRQ(I2CI0_ER_IRQn);
 741              		.loc 1 395 7 is_stmt 1 view .LVU184
 742 00ac 0122     		movs	r2, #1
 743 00ae 1146     		mov	r1, r2
 744 00b0 2020     		movs	r0, #32
 745 00b2 FFF7FEFF 		bl	HAL_NVIC_SetPriority
 746              	.LVL54:
 396:Core/Src/hal_i2c.c ****       HAL_NVIC_SetPriority(I2CI0_EV_IRQn, 1, 2);
 747              		.loc 1 396 7 view .LVU185
 748 00b6 2020     		movs	r0, #32
 749 00b8 FFF7FEFF 		bl	HAL_NVIC_EnableIRQ
 750              	.LVL55:
 397:Core/Src/hal_i2c.c ****       HAL_NVIC_EnableIRQ(I2CI0_EV_IRQn);
 751              		.loc 1 397 7 view .LVU186
 752 00bc 0222     		movs	r2, #2
 753 00be 0121     		movs	r1, #1
 754 00c0 1F20     		movs	r0, #31
 755 00c2 FFF7FEFF 		bl	HAL_NVIC_SetPriority
 756              	.LVL56:
 398:Core/Src/hal_i2c.c ****       break;
 757              		.loc 1 398 7 view .LVU187
 758 00c6 1F20     		movs	r0, #31
 759 00c8 FFF7FEFF 		bl	HAL_NVIC_EnableIRQ
 760              	.LVL57:
 399:Core/Src/hal_i2c.c ****     case HAL_I2C1:
 761              		.loc 1 399 7 view .LVU188
 762 00cc 9EE7     		b	.L40
 763              	.L51:
 764 00ce 00BF     		.align	2
 765              	.L50:
 766 00d0 00100240 		.word	1073876992
 767 00d4 00000000 		.word	sda_pin_func
 768 00d8 00000000 		.word	sda_pin
ARM GAS  C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s 			page 24


 769 00dc 00000000 		.word	scl_pin_func
 770 00e0 00000000 		.word	scl_pin
 771              	.LBE6:
 772              		.cfi_endproc
 773              	.LFE79:
 775              		.section	.text.hal_i2c_MspDeInit,"ax",%progbits
 776              		.align	1
 777              		.global	hal_i2c_MspDeInit
 778              		.syntax unified
 779              		.thumb
 780              		.thumb_func
 782              	hal_i2c_MspDeInit:
 783              	.LVL58:
 784              	.LFB80:
 420:Core/Src/hal_i2c.c **** 
 421:Core/Src/hal_i2c.c **** /**
 422:Core/Src/hal_i2c.c ****  * @brief I2C MSP De-Initialization
 423:Core/Src/hal_i2c.c ****  *        This function frees the hardware resources used in this example:
 424:Core/Src/hal_i2c.c ****  *          - Disable the Peripheral's clock
 425:Core/Src/hal_i2c.c ****  *          - Revert GPIO, DMA and NVIC configuration to their default state
 426:Core/Src/hal_i2c.c ****  * @param hi2c: I2C handle pointer
 427:Core/Src/hal_i2c.c ****  * @retval None
 428:Core/Src/hal_i2c.c ****  */
 429:Core/Src/hal_i2c.c **** void hal_i2c_MspDeInit(I2C_HandleTypeDef *hi2c)
 430:Core/Src/hal_i2c.c **** {
 785              		.loc 1 430 1 view -0
 786              		.cfi_startproc
 787              		@ args = 0, pretend = 0, frame = 0
 788              		@ frame_needed = 0, uses_anonymous_args = 0
 789              		.loc 1 430 1 is_stmt 0 view .LVU190
 790 0000 10B5     		push	{r4, lr}
 791              	.LCFI17:
 792              		.cfi_def_cfa_offset 8
 793              		.cfi_offset 4, -8
 794              		.cfi_offset 14, -4
 431:Core/Src/hal_i2c.c ****   int32_t idx;
 795              		.loc 1 431 3 is_stmt 1 view .LVU191
 432:Core/Src/hal_i2c.c ****   idx = hal_i2c_handle_idx(hi2c);
 796              		.loc 1 432 3 view .LVU192
 797              		.loc 1 432 9 is_stmt 0 view .LVU193
 798 0002 FFF7FEFF 		bl	hal_i2c_handle_idx
 799              	.LVL59:
 433:Core/Src/hal_i2c.c ****   if ((idx >= 0) && (idx < HAL_I2C_NUM))
 800              		.loc 1 433 3 is_stmt 1 view .LVU194
 801              		.loc 1 433 6 is_stmt 0 view .LVU195
 802 0006 0128     		cmp	r0, #1
 803 0008 00D9     		bls	.L58
 804              	.LVL60:
 805              	.L52:
 434:Core/Src/hal_i2c.c ****   {
 435:Core/Src/hal_i2c.c ****     switch (idx)
 436:Core/Src/hal_i2c.c ****     {
 437:Core/Src/hal_i2c.c ****     case HAL_I2C0:
 438:Core/Src/hal_i2c.c ****       /*##-1- Reset peripherals ##################################################*/
 439:Core/Src/hal_i2c.c ****       I2CI0_FORCE_RESET();
 440:Core/Src/hal_i2c.c ****       I2CI0_RELEASE_RESET();
 441:Core/Src/hal_i2c.c **** 
ARM GAS  C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s 			page 25


 442:Core/Src/hal_i2c.c **** /*##-2- Disable peripherals and GPIO Clocks #################################*/
 443:Core/Src/hal_i2c.c **** /* Configure I2C Tx as alternate function  */
 444:Core/Src/hal_i2c.c **** // HAL_GPIO_DeInit(I2Cx_SCL_GPIO_PORT, I2Cx_SCL_PIN);
 445:Core/Src/hal_i2c.c **** // /* Configure I2C Rx as alternate function  */
 446:Core/Src/hal_i2c.c **** // HAL_GPIO_DeInit(I2Cx_SDA_GPIO_PORT, I2Cx_SDA_PIN);
 447:Core/Src/hal_i2c.c **** 
 448:Core/Src/hal_i2c.c **** /*##-4- Disable the NVIC for DMA ###########################################*/
 449:Core/Src/hal_i2c.c **** #if I2C_USE_DMA
 450:Core/Src/hal_i2c.c ****       HAL_NVIC_DisableIRQ(I2CI0_DMA_TX_IRQn);
 451:Core/Src/hal_i2c.c ****       HAL_NVIC_DisableIRQ(I2CI0_DMA_RX_IRQn);
 452:Core/Src/hal_i2c.c **** #endif
 453:Core/Src/hal_i2c.c ****       /*##-5- Disable the NVIC for I2C ##########################################*/
 454:Core/Src/hal_i2c.c ****       HAL_NVIC_DisableIRQ(I2CI0_ER_IRQn);
 455:Core/Src/hal_i2c.c ****       HAL_NVIC_DisableIRQ(I2CI0_EV_IRQn);
 456:Core/Src/hal_i2c.c ****       break;
 457:Core/Src/hal_i2c.c ****     case HAL_I2C1:
 458:Core/Src/hal_i2c.c ****       /*##-1- Reset peripherals ##################################################*/
 459:Core/Src/hal_i2c.c ****       I2CI1_FORCE_RESET();
 460:Core/Src/hal_i2c.c ****       I2CI1_RELEASE_RESET();
 461:Core/Src/hal_i2c.c **** 
 462:Core/Src/hal_i2c.c **** /*##-2- Disable peripherals and GPIO Clocks #################################*/
 463:Core/Src/hal_i2c.c **** /* Configure I2C Tx as alternate function  */
 464:Core/Src/hal_i2c.c **** // HAL_GPIO_DeInit(I2Cx_SCL_GPIO_PORT, I2Cx_SCL_PIN);
 465:Core/Src/hal_i2c.c **** // /* Configure I2C Rx as alternate function  */
 466:Core/Src/hal_i2c.c **** // HAL_GPIO_DeInit(I2Cx_SDA_GPIO_PORT, I2Cx_SDA_PIN);
 467:Core/Src/hal_i2c.c **** 
 468:Core/Src/hal_i2c.c **** /*##-4- Disable the NVIC for DMA ###########################################*/
 469:Core/Src/hal_i2c.c **** #if I2C_USE_DMA
 470:Core/Src/hal_i2c.c ****       HAL_NVIC_DisableIRQ(I2CI1_DMA_TX_IRQn);
 471:Core/Src/hal_i2c.c ****       HAL_NVIC_DisableIRQ(I2CI1_DMA_RX_IRQn);
 472:Core/Src/hal_i2c.c **** #endif
 473:Core/Src/hal_i2c.c ****       /*##-5- Disable the NVIC for I2C ##########################################*/
 474:Core/Src/hal_i2c.c ****       HAL_NVIC_DisableIRQ(I2CI1_ER_IRQn);
 475:Core/Src/hal_i2c.c ****       HAL_NVIC_DisableIRQ(I2CI1_EV_IRQn);
 476:Core/Src/hal_i2c.c ****       break;
 477:Core/Src/hal_i2c.c ****     }
 478:Core/Src/hal_i2c.c **** 
 479:Core/Src/hal_i2c.c **** /*##-3- Disable the DMA Channels ###########################################*/
 480:Core/Src/hal_i2c.c **** /* De-Initialize the DMA Channel associated to transmission process */
 481:Core/Src/hal_i2c.c **** #if I2C_USE_DMA
 482:Core/Src/hal_i2c.c ****     HAL_DMA_DeInit(&hdma_i2c_tx[idx]);
 483:Core/Src/hal_i2c.c ****     /* De-Initialize the DMA Channel associated to reception process */
 484:Core/Src/hal_i2c.c ****     HAL_DMA_DeInit(&hdma_i2c_rx[idx]);
 485:Core/Src/hal_i2c.c ****     memset(&hdma_i2c_rx[idx], 0, sizeof(DMA_HandleTypeDef));
 486:Core/Src/hal_i2c.c ****     memset(&hdma_i2c_tx[idx], 0, sizeof(DMA_HandleTypeDef));
 487:Core/Src/hal_i2c.c **** #endif
 488:Core/Src/hal_i2c.c ****     memset(&handle_i2c[idx], 0, sizeof(I2C_HandleTypeDef));
 489:Core/Src/hal_i2c.c ****   }
 490:Core/Src/hal_i2c.c **** }
 806              		.loc 1 490 1 view .LVU196
 807 000a 10BD     		pop	{r4, pc}
 808              	.LVL61:
 809              	.L58:
 810              		.loc 1 490 1 view .LVU197
 811 000c 0446     		mov	r4, r0
 435:Core/Src/hal_i2c.c ****     {
 812              		.loc 1 435 5 is_stmt 1 view .LVU198
ARM GAS  C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s 			page 26


 813 000e 88B1     		cbz	r0, .L54
 435:Core/Src/hal_i2c.c ****     {
 814              		.loc 1 435 5 is_stmt 0 view .LVU199
 815 0010 0128     		cmp	r0, #1
 816 0012 1ED1     		bne	.L56
 459:Core/Src/hal_i2c.c ****       I2CI1_RELEASE_RESET();
 817              		.loc 1 459 7 is_stmt 1 view .LVU200
 818 0014 134B     		ldr	r3, .L59
 819 0016 1A69     		ldr	r2, [r3, #16]
 820 0018 42F48002 		orr	r2, r2, #4194304
 821 001c 1A61     		str	r2, [r3, #16]
 460:Core/Src/hal_i2c.c **** 
 822              		.loc 1 460 7 view .LVU201
 823 001e 1A69     		ldr	r2, [r3, #16]
 824 0020 22F48002 		bic	r2, r2, #4194304
 825 0024 1A61     		str	r2, [r3, #16]
 474:Core/Src/hal_i2c.c ****       HAL_NVIC_DisableIRQ(I2CI1_EV_IRQn);
 826              		.loc 1 474 7 view .LVU202
 827 0026 2220     		movs	r0, #34
 828              	.LVL62:
 474:Core/Src/hal_i2c.c ****       HAL_NVIC_DisableIRQ(I2CI1_EV_IRQn);
 829              		.loc 1 474 7 is_stmt 0 view .LVU203
 830 0028 FFF7FEFF 		bl	HAL_NVIC_DisableIRQ
 831              	.LVL63:
 475:Core/Src/hal_i2c.c ****       break;
 832              		.loc 1 475 7 is_stmt 1 view .LVU204
 833 002c 2120     		movs	r0, #33
 834 002e FFF7FEFF 		bl	HAL_NVIC_DisableIRQ
 835              	.LVL64:
 476:Core/Src/hal_i2c.c ****     }
 836              		.loc 1 476 7 view .LVU205
 837 0032 0EE0     		b	.L56
 838              	.LVL65:
 839              	.L54:
 439:Core/Src/hal_i2c.c ****       I2CI0_RELEASE_RESET();
 840              		.loc 1 439 7 view .LVU206
 841 0034 0B4B     		ldr	r3, .L59
 842 0036 1A69     		ldr	r2, [r3, #16]
 843 0038 42F40012 		orr	r2, r2, #2097152
 844 003c 1A61     		str	r2, [r3, #16]
 440:Core/Src/hal_i2c.c **** 
 845              		.loc 1 440 7 view .LVU207
 846 003e 1A69     		ldr	r2, [r3, #16]
 847 0040 22F40012 		bic	r2, r2, #2097152
 848 0044 1A61     		str	r2, [r3, #16]
 454:Core/Src/hal_i2c.c ****       HAL_NVIC_DisableIRQ(I2CI0_EV_IRQn);
 849              		.loc 1 454 7 view .LVU208
 850 0046 2020     		movs	r0, #32
 851              	.LVL66:
 454:Core/Src/hal_i2c.c ****       HAL_NVIC_DisableIRQ(I2CI0_EV_IRQn);
 852              		.loc 1 454 7 is_stmt 0 view .LVU209
 853 0048 FFF7FEFF 		bl	HAL_NVIC_DisableIRQ
 854              	.LVL67:
 455:Core/Src/hal_i2c.c ****       break;
 855              		.loc 1 455 7 is_stmt 1 view .LVU210
 856 004c 1F20     		movs	r0, #31
 857 004e FFF7FEFF 		bl	HAL_NVIC_DisableIRQ
ARM GAS  C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s 			page 27


 858              	.LVL68:
 456:Core/Src/hal_i2c.c ****     case HAL_I2C1:
 859              		.loc 1 456 7 view .LVU211
 860              	.L56:
 488:Core/Src/hal_i2c.c ****   }
 861              		.loc 1 488 5 view .LVU212
 488:Core/Src/hal_i2c.c ****   }
 862              		.loc 1 488 12 is_stmt 0 view .LVU213
 863 0052 5422     		movs	r2, #84
 488:Core/Src/hal_i2c.c ****   }
 864              		.loc 1 488 5 view .LVU214
 865 0054 0021     		movs	r1, #0
 866 0056 0448     		ldr	r0, .L59+4
 867 0058 02FB0400 		mla	r0, r2, r4, r0
 868 005c FFF7FEFF 		bl	memset
 869              	.LVL69:
 870              		.loc 1 490 1 view .LVU215
 871 0060 D3E7     		b	.L52
 872              	.L60:
 873 0062 00BF     		.align	2
 874              	.L59:
 875 0064 00100240 		.word	1073876992
 876 0068 00000000 		.word	handle_i2c
 877              		.cfi_endproc
 878              	.LFE80:
 880              		.section	.text.hal_i2c_close,"ax",%progbits
 881              		.align	1
 882              		.global	hal_i2c_close
 883              		.syntax unified
 884              		.thumb
 885              		.thumb_func
 887              	hal_i2c_close:
 888              	.LVL70:
 889              	.LFB71:
 208:Core/Src/hal_i2c.c ****   hal_i2c_stt_e stt = HAL_I2C_SUCCESS;
 890              		.loc 1 208 1 is_stmt 1 view -0
 891              		.cfi_startproc
 892              		@ args = 0, pretend = 0, frame = 0
 893              		@ frame_needed = 0, uses_anonymous_args = 0
 208:Core/Src/hal_i2c.c ****   hal_i2c_stt_e stt = HAL_I2C_SUCCESS;
 894              		.loc 1 208 1 is_stmt 0 view .LVU217
 895 0000 10B5     		push	{r4, lr}
 896              	.LCFI18:
 897              		.cfi_def_cfa_offset 8
 898              		.cfi_offset 4, -8
 899              		.cfi_offset 14, -4
 900 0002 0446     		mov	r4, r0
 209:Core/Src/hal_i2c.c ****   int32_t idx = hal_i2c_handle_idx(*handle);
 901              		.loc 1 209 3 is_stmt 1 view .LVU218
 902              	.LVL71:
 210:Core/Src/hal_i2c.c ****   hal_i2c_MspDeInit(*handle);
 903              		.loc 1 210 3 view .LVU219
 211:Core/Src/hal_i2c.c ****   *handle = NULL;
 904              		.loc 1 211 3 view .LVU220
 905 0004 0068     		ldr	r0, [r0]
 906              	.LVL72:
 211:Core/Src/hal_i2c.c ****   *handle = NULL;
ARM GAS  C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s 			page 28


 907              		.loc 1 211 3 is_stmt 0 view .LVU221
 908 0006 FFF7FEFF 		bl	hal_i2c_MspDeInit
 909              	.LVL73:
 212:Core/Src/hal_i2c.c ****   return stt;
 910              		.loc 1 212 3 is_stmt 1 view .LVU222
 212:Core/Src/hal_i2c.c ****   return stt;
 911              		.loc 1 212 11 is_stmt 0 view .LVU223
 912 000a 0020     		movs	r0, #0
 913 000c 2060     		str	r0, [r4]
 213:Core/Src/hal_i2c.c **** }
 914              		.loc 1 213 3 is_stmt 1 view .LVU224
 214:Core/Src/hal_i2c.c **** 
 915              		.loc 1 214 1 is_stmt 0 view .LVU225
 916 000e 10BD     		pop	{r4, pc}
 214:Core/Src/hal_i2c.c **** 
 917              		.loc 1 214 1 view .LVU226
 918              		.cfi_endproc
 919              	.LFE71:
 921              		.global	scl_pin_func
 922              		.section	.rodata.scl_pin_func,"a"
 923              		.align	2
 926              	scl_pin_func:
 927 0000 0400     		.short	4
 928 0002 0400     		.short	4
 929              		.global	sda_pin_func
 930              		.section	.rodata.sda_pin_func,"a"
 931              		.align	2
 934              	sda_pin_func:
 935 0000 0400     		.short	4
 936 0002 0400     		.short	4
 937              		.global	scl_pin
 938              		.section	.rodata.scl_pin,"a"
 939              		.align	2
 942              	scl_pin:
 943 0000 01       		.byte	1
 944 0001 06       		.byte	6
 945 0002 01       		.byte	1
 946 0003 06       		.byte	6
 947              		.global	sda_pin
 948              		.section	.rodata.sda_pin,"a"
 949              		.align	2
 952              	sda_pin:
 953 0000 01       		.byte	1
 954 0001 07       		.byte	7
 955 0002 01       		.byte	1
 956 0003 07       		.byte	7
 957              		.global	i2c_timing
 958              		.section	.rodata.i2c_timing,"a"
 959              		.align	2
 962              	i2c_timing:
 963 0000 A0860100 		.word	100000
 964 0004 801A0600 		.word	400000
 965              		.global	i2c_module
 966              		.section	.data.i2c_module,"aw"
 967              		.align	2
 970              	i2c_module:
 971 0000 00540040 		.word	1073763328
ARM GAS  C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s 			page 29


 972 0004 00580040 		.word	1073764352
 973              		.section	.bss.slave_addr,"aw",%nobits
 974              		.align	2
 977              	slave_addr:
 978 0000 0000     		.space	2
 979              		.global	handle_i2c
 980              		.section	.bss.handle_i2c,"aw",%nobits
 981              		.align	2
 984              	handle_i2c:
 985 0000 00000000 		.space	168
 985      00000000 
 985      00000000 
 985      00000000 
 985      00000000 
 986              		.text
 987              	.Letext0:
 988              		.file 2 "C:/msys64/mingw64/arm-none-eabi/include/machine/_default_types.h"
 989              		.file 3 "C:/msys64/mingw64/arm-none-eabi/include/sys/_stdint.h"
 990              		.file 4 "Core/Inc/hal_i2c.h"
 991              		.file 5 "Drivers/CMSIS/Device/ST/STM32F1xx/Include/stm32f103xb.h"
 992              		.file 6 "C:/msys64/mingw64/lib/gcc/arm-none-eabi/13.3.0/include/stddef.h"
 993              		.file 7 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_def.h"
 994              		.file 8 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_dma.h"
 995              		.file 9 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_i2c.h"
 996              		.file 10 "Core/Inc/hal_gpio.h"
 997              		.file 11 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_cortex.h"
 998              		.file 12 "C:/msys64/mingw64/arm-none-eabi/include/string.h"
 999              		.file 13 "<built-in>"
ARM GAS  C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s 			page 30


DEFINED SYMBOLS
                            *ABS*:00000000 hal_i2c.c
C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s:19     .text.hal_i2c_handle_idx:00000000 $t
C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s:24     .text.hal_i2c_handle_idx:00000000 hal_i2c_handle_idx
C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s:72     .text.hal_i2c_handle_idx:00000020 $d
C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s:984    .bss.handle_i2c:00000000 handle_i2c
C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s:77     .text.hal_i2c_init:00000000 $t
C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s:83     .text.hal_i2c_init:00000000 hal_i2c_init
C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s:100    .text.hal_i2c_open:00000000 $t
C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s:106    .text.hal_i2c_open:00000000 hal_i2c_open
C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s:207    .text.hal_i2c_open:0000005c $d
C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s:970    .data.i2c_module:00000000 i2c_module
C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s:962    .rodata.i2c_timing:00000000 i2c_timing
C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s:977    .bss.slave_addr:00000000 slave_addr
C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s:215    .text.hal_i2c_set_slave_addr:00000000 $t
C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s:221    .text.hal_i2c_set_slave_addr:00000000 hal_i2c_set_slave_addr
C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s:269    .text.hal_i2c_set_slave_addr:00000018 $d
C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s:274    .text.hal_i2c_read:00000000 $t
C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s:280    .text.hal_i2c_read:00000000 hal_i2c_read
C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s:364    .text.hal_i2c_read:00000048 $d
C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s:369    .text.hal_i2c_write:00000000 $t
C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s:375    .text.hal_i2c_write:00000000 hal_i2c_write
C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s:459    .text.hal_i2c_write:00000048 $d
C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s:464    .text.hal_i2c_cancel:00000000 $t
C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s:470    .text.hal_i2c_cancel:00000000 hal_i2c_cancel
C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s:489    .text.HAL_I2C_MemTxCpltCallback:00000000 $t
C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s:495    .text.HAL_I2C_MemTxCpltCallback:00000000 HAL_I2C_MemTxCpltCallback
C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s:512    .text.HAL_I2C_MemRxCpltCallback:00000000 $t
C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s:518    .text.HAL_I2C_MemRxCpltCallback:00000000 HAL_I2C_MemRxCpltCallback
C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s:535    .text.HAL_I2C_MasterTxCpltCallback:00000000 $t
C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s:541    .text.HAL_I2C_MasterTxCpltCallback:00000000 HAL_I2C_MasterTxCpltCallback
C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s:558    .text.HAL_I2C_MasterRxCpltCallback:00000000 $t
C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s:564    .text.HAL_I2C_MasterRxCpltCallback:00000000 HAL_I2C_MasterRxCpltCallback
C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s:581    .text.hal_i2c_MspInit:00000000 $t
C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s:587    .text.hal_i2c_MspInit:00000000 hal_i2c_MspInit
C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s:766    .text.hal_i2c_MspInit:000000d0 $d
C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s:934    .rodata.sda_pin_func:00000000 sda_pin_func
C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s:952    .rodata.sda_pin:00000000 sda_pin
C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s:926    .rodata.scl_pin_func:00000000 scl_pin_func
C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s:942    .rodata.scl_pin:00000000 scl_pin
C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s:776    .text.hal_i2c_MspDeInit:00000000 $t
C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s:782    .text.hal_i2c_MspDeInit:00000000 hal_i2c_MspDeInit
C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s:875    .text.hal_i2c_MspDeInit:00000064 $d
C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s:881    .text.hal_i2c_close:00000000 $t
C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s:887    .text.hal_i2c_close:00000000 hal_i2c_close
C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s:923    .rodata.scl_pin_func:00000000 $d
C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s:931    .rodata.sda_pin_func:00000000 $d
C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s:939    .rodata.scl_pin:00000000 $d
C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s:949    .rodata.sda_pin:00000000 $d
C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s:959    .rodata.i2c_timing:00000000 $d
C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s:967    .data.i2c_module:00000000 $d
C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s:974    .bss.slave_addr:00000000 $d
C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s:981    .bss.handle_i2c:00000000 $d
                           .group:00000000 wm4.0.82cd861fcffc377458525806b973ac66
                           .group:00000000 wm4._newlib_version.h.4.411db44ea2338a62eca2f0777f81481b
                           .group:00000000 wm4.features.h.33.2eefb68b261e70563a8ac654e712169f
                           .group:00000000 wm4._default_types.h.15.247e5cd201eca3442cbf5404108c4935
ARM GAS  C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s 			page 31


                           .group:00000000 wm4._intsup.h.10.48bafbb683905c4daa4565a85aeeb264
                           .group:00000000 wm4._stdint.h.10.c24fa3af3bc1706662bb5593a907e841
                           .group:00000000 wm4.stdint.h.23.d53047a68f4a85177f80b422d52785ed
                           .group:00000000 wm4.stdbool.h.29.c08aa3eec75cf5b9b5003883f43253f0
                           .group:00000000 wm4.stm32f1xx_hal_conf.h.22.cbdc1b1d5adafd94f8d8dcf6c1f3e8fc
                           .group:00000000 wm4.stm32f1xx.h.38.e862c4e1b39ca120fca296a79f75a275
                           .group:00000000 wm4.stm32f103xb.h.37.7c5fb130aa158ead5441dda9799c1941
                           .group:00000000 wm4.cmsis_version.h.32.4d5822004c01a829a975260e854b5f8e
                           .group:00000000 wm4.core_cm3.h.66.fc46cac19810db8f98d67da7ef88f42c
                           .group:00000000 wm4.cmsis_gcc.h.26.4f5798e999d5690b80e6ded3ecc94b37
                           .group:00000000 wm4.core_cm3.h.127.f4474120f1a7524deb56f9d74ff175da
                           .group:00000000 wm4.stm32f103xb.h.572.e8b8d889d857e2c56f82ca03c5328917
                           .group:00000000 wm4.stm32f1xx.h.161.0d1b9fd26c53008e1116394047fa1b84
                           .group:00000000 wm4.stm32_hal_legacy.h.22.d050171c85a9d8567d1f9a012537baa2
                           .group:00000000 wm4.stddef.h.39.0dc9006b34572d4d9cae4c8b422c4971
                           .group:00000000 wm4.stm32f1xx_hal_def.h.56.354d0a4bf0f6ef7af10e3429b7628481
                           .group:00000000 wm4.stm32f1xx_hal_rcc.h.93.3fadb58bdef0723b74d9eb798753b168
                           .group:00000000 wm4.stm32f1xx_hal_rcc_ex.h.20.5a464c1dc9022dc2a67fe45b2054f77c
                           .group:00000000 wm4.stm32f1xx_hal_rcc.h.1200.d6cbb5717f01cee373a6e1fba84d9163
                           .group:00000000 wm4.stm32f1xx_hal_gpio.h.21.0099da253a68660e916195d3e8928be3
                           .group:00000000 wm4.stm32f1xx_hal_gpio_ex.h.21.93f1f3ec7660fa76375def81b976f73c
                           .group:00000000 wm4.stm32f1xx_hal_gpio.h.262.7df79220ec7519ba80c1763e6b4854a6
                           .group:00000000 wm4.stm32f1xx_hal_exti.h.21.a7f1b393a0c9b2b56b72ccdbb8dee508
                           .group:00000000 wm4.stm32f1xx_hal_dma.h.21.11e5a204ed6aa790b1cdae2e4192bc9d
                           .group:00000000 wm4.stm32f1xx_hal_dma_ex.h.21.d438f745b4c04dc23f9f569190526864
                           .group:00000000 wm4.stm32f1xx_hal_dma.h.408.14794a3f8621230c9ac7fca0cacf3e57
                           .group:00000000 wm4.stm32f1xx_hal_cortex.h.21.6ab92041a8778f53d2d2d96b3825535a
                           .group:00000000 wm4.stm32f1xx_hal_flash.h.20.2db7f614c43999568df8c1bd8d5f2459
                           .group:00000000 wm4.stm32f1xx_hal_flash_ex.h.20.c1d01fb364bcc8befd238a2d45469cc1
                           .group:00000000 wm4.stm32f1xx_hal_i2c.h.21.6a947c870feb456d84d10dd871ee01bd
                           .group:00000000 wm4.stm32f1xx_hal_pwr.h.21.ec3e2cfd4c26fffa32fc4ff0a8ac7390
                           .group:00000000 wm4.stm32f1xx_hal_uart.h.21.96146ab5759dfe03d0cc100d79254944
                           .group:00000000 wm4.stm32f1xx_hal.h.87.60093b86a987865736d7cddecce3c235
                           .group:00000000 wm4.config.h.15.a50358ef8e0941ea81c9ce0d97b6c4e9
                           .group:00000000 wm4.board_config.h.17.76440630512c5a39a72ccf129420cb1e
                           .group:00000000 wm4.memory_map.h.2.599c80b922284b8603b2b4cc79e14715
                           .group:00000000 wm4.newlib.h.7.a37ffbe9e5aff74303f4e60b1cc1c01b
                           .group:00000000 wm4.ieeefp.h.77.fbf6f2f498a71d39a0aaf172d6680419
                           .group:00000000 wm4.config.h.224.10ee1ad185d877c6e334e6581faab44d
                           .group:00000000 wm4._ansi.h.31.de524f58584151836e90d8620a16f8e8
                           .group:00000000 wm4.cdefs.h.49.70fc7af612f78ddcace70fdd90b5623b
                           .group:00000000 wm4._types.h.20.dd0d04dca3800a0d2a6129b87f3adbb2
                           .group:00000000 wm4.stddef.h.158.6f8e08a347b1cff664332fa350bfceb3
                           .group:00000000 wm4._types.h.127.3bdfe3ff8ea2d0985b03d9cbe93480e3
                           .group:00000000 wm4.reent.h.18.25503cdc8b7e55dd0d6ea7b3e5af7a03
                           .group:00000000 wm4.lock.h.2.1461d1fff82dffe8bfddc23307f6484f
                           .group:00000000 wm4.reent.h.78.7f0775353a33c852a1479c008f68cd03
                           .group:00000000 wm4.string.h.15.dab3980bf35408a4c507182805e2de3a
                           .group:00000000 wm4.stddef.h.158.eec8bf00b5213f43d095cb984c5f22e3

UNDEFINED SYMBOLS
HAL_I2C_Init
HAL_I2C_Master_Receive_IT
HAL_I2C_Mem_Read_IT
HAL_I2C_Master_Transmit_IT
HAL_I2C_Mem_Write_IT
hal_gpio_pin_config
ARM GAS  C:\Users\binhp\AppData\Local\Temp\ccAxF4gu.s 			page 32


HAL_NVIC_SetPriority
HAL_NVIC_EnableIRQ
HAL_NVIC_DisableIRQ
memset
